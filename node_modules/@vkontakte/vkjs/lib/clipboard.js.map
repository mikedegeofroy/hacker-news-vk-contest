{"version":3,"sources":["../src/clipboard.ts"],"sourcesContent":["function copyWithNavigator(text: string): Promise<boolean> {\n  return navigator.clipboard.writeText(text).then(() => true);\n}\n\nfunction copyWithFakeElement(text: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    const textareaEl = document.createElement('textarea');\n    const range = document.createRange();\n\n    textareaEl.value = text;\n    textareaEl.style.position = 'fixed'; // Avoid scrolling to bottom\n    textareaEl.contentEditable = 'true';\n\n    document.body.appendChild(textareaEl);\n\n    textareaEl.focus();\n    textareaEl.select();\n\n    range.selectNodeContents(textareaEl);\n\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    textareaEl.setSelectionRange(0, 999999);\n\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        resolve(true);\n      } else {\n        reject(new Error('copy failed'));\n      }\n    } catch (error) {\n      reject(error);\n    }\n\n    if (selection) {\n      selection.removeAllRanges();\n    }\n\n    document.body.removeChild(textareaEl);\n  });\n}\n\nexport function copyTextToClipboard(text: string): Promise<boolean> {\n  if (navigator.clipboard) {\n    return copyWithNavigator(text).catch(() => copyWithFakeElement(text));\n  } else {\n    return copyWithFakeElement(text);\n  }\n}\n"],"names":["copyTextToClipboard","copyWithNavigator","text","navigator","clipboard","writeText","then","copyWithFakeElement","Promise","resolve","reject","textareaEl","document","createElement","range","createRange","value","style","position","contentEditable","body","appendChild","focus","select","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","setSelectionRange","successful","execCommand","Error","error","removeChild","catch"],"mappings":";;;;+BA+CgBA;;;eAAAA;;;AA/ChB,SAASC,kBAAkBC,IAAY;IACrC,OAAOC,UAAUC,SAAS,CAACC,SAAS,CAACH,MAAMI,IAAI,CAAC;eAAM;;AACxD;AAEA,SAASC,oBAAoBL,IAAY;IACvC,OAAO,IAAIM,QAAQ,SAACC,SAASC;QAC3B,IAAMC,aAAaC,SAASC,aAAa,CAAC;QAC1C,IAAMC,QAAQF,SAASG,WAAW;QAElCJ,WAAWK,KAAK,GAAGd;QACnBS,WAAWM,KAAK,CAACC,QAAQ,GAAG;QAAS,4BAA4B;QACjEP,WAAWQ,eAAe,GAAG;QAE7BP,SAASQ,IAAI,CAACC,WAAW,CAACV;QAE1BA,WAAWW,KAAK;QAChBX,WAAWY,MAAM;QAEjBT,MAAMU,kBAAkB,CAACb;QAEzB,IAAMc,YAAYC,OAAOC,YAAY;QACrC,IAAIF,WAAW;YACbA,UAAUG,eAAe;YACzBH,UAAUI,QAAQ,CAACf;QACrB;QAEAH,WAAWmB,iBAAiB,CAAC,GAAG;QAEhC,IAAI;YACF,IAAMC,aAAanB,SAASoB,WAAW,CAAC;YACxC,IAAID,YAAY;gBACdtB,QAAQ;YACV,OAAO;gBACLC,OAAO,IAAIuB,MAAM;YACnB;QACF,EAAE,OAAOC,OAAO;YACdxB,OAAOwB;QACT;QAEA,IAAIT,WAAW;YACbA,UAAUG,eAAe;QAC3B;QAEAhB,SAASQ,IAAI,CAACe,WAAW,CAACxB;IAC5B;AACF;AAEO,SAASX,oBAAoBE,IAAY;IAC9C,IAAIC,UAAUC,SAAS,EAAE;QACvB,OAAOH,kBAAkBC,MAAMkC,KAAK,CAAC;mBAAM7B,oBAAoBL;;IACjE,OAAO;QACL,OAAOK,oBAAoBL;IAC7B;AACF"}