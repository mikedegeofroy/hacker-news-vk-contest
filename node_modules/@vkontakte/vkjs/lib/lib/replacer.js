"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "Replacer", {
    enumerable: true,
    get: function() {
        return Replacer;
    }
});
var _class_call_check = require("@swc/helpers/_/_class_call_check");
var _create_class = require("@swc/helpers/_/_create_class");
var _define_property = require("@swc/helpers/_/_define_property");
var _regexp = require("../regexp");
var Replacer = /*#__PURE__*/ function() {
    "use strict";
    function Replacer(map) {
        _class_call_check._(this, Replacer);
        _define_property._(this, "regexp", void 0);
        _define_property._(this, "map", void 0);
        this.map = map;
    }
    _create_class._(Replacer, [
        {
            key: "build",
            value: function build() {
                if (this.regexp) {
                    return;
                }
                var groups = Object.keys(this.map).map(_regexp.escapeRegExp).sort(function(a, b) {
                    return b.length - a.length;
                });
                var pattern = "(?:".concat(groups.join("|"), ")");
                this.regexp = new RegExp(pattern, "g");
            }
        },
        {
            key: "replace",
            value: function replace(string) {
                var _this = this;
                if (!string) {
                    return "";
                }
                this.build();
                return string.replace(this.regexp, function(substring) {
                    return _this.map[substring];
                });
            }
        }
    ]);
    return Replacer;
}();

//# sourceMappingURL=replacer.js.map