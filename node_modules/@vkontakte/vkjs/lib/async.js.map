{"version":3,"sources":["../src/async.ts"],"sourcesContent":["/**\n * Loads async import with retries. It can be useful for bad internet connection\n *\n * @example\n * const HeaderLazyComponent = React.lazy(() => asyncImportLoader(() => import('../components/Header/Header')));\n *\n * @example\n * asyncImportLoader(() => import('some-module'), 20).then((someModule) => {\n *   someModule.init();\n * });\n */\nexport const asyncImportLoader = <T>(asyncImport: () => Promise<T>, attempts = 10): Promise<T> => {\n  return new Promise((resolve, reject) => {\n    asyncImport()\n      .then(resolve)\n      .catch((error) => {\n        setTimeout(() => {\n          if (attempts === 0) {\n            reject(error);\n            return;\n          }\n          asyncImportLoader(asyncImport, attempts - 1).then(resolve, reject);\n        }, 1000);\n      });\n  });\n};\n"],"names":["asyncImportLoader","asyncImport","attempts","Promise","resolve","reject","then","catch","error","setTimeout"],"mappings":";;;;+BAWaA;;;eAAAA;;;AAXb;;;;;;;;;;CAUC,GACM,IAAMA,oBAAoB,SAAIC;QAA+BC,4EAAW;IAC7E,OAAO,IAAIC,QAAQ,SAACC,SAASC;QAC3BJ,cACGK,IAAI,CAACF,SACLG,KAAK,CAAC,SAACC;YACNC,WAAW;gBACT,IAAIP,aAAa,GAAG;oBAClBG,OAAOG;oBACP;gBACF;gBACAR,kBAAkBC,aAAaC,WAAW,GAAGI,IAAI,CAACF,SAASC;YAC7D,GAAG;QACL;IACJ;AACF"}