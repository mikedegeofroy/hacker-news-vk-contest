{"version":3,"sources":["../../src/lib/browser.ts"],"sourcesContent":["import { detectIOS, noop } from '@vkontakte/vkjs';\nimport type { Version } from '../types';\n\nexport interface BrowserInfo {\n  userAgent: string;\n  system: 'ios' | '';\n  systemVersion: Version | null;\n}\n\nconst memoized: { [index: string]: BrowserInfo } = {};\n\nexport function computeBrowserInfo(userAgent = ''): BrowserInfo {\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n\n  const browserInfo: BrowserInfo = {\n    userAgent,\n    system: '',\n    systemVersion: null,\n  };\n\n  const { isIOS, iosMajor, iosMinor } = detectIOS(userAgent);\n\n  if (isIOS) {\n    browserInfo.system = 'ios';\n    browserInfo.systemVersion = {\n      major: iosMajor,\n      minor: iosMinor,\n    };\n  }\n\n  memoized[userAgent] = browserInfo;\n\n  return browserInfo;\n}\n\n/**\n * Эмуляция функции `window.matchMedia` для SSR.\n *\n * ⚠️ Желательно избегать использование этой эмуляции в SSR.\n */\nexport function mediaQueryNull(query: string): MediaQueryList {\n  return {\n    matches: false,\n    media: query,\n    onchange: noop,\n    addListener: noop,\n    removeListener: noop,\n    addEventListener: noop,\n    removeEventListener: noop,\n    dispatchEvent() {\n      return false;\n    },\n  };\n}\n"],"names":["detectIOS","noop","memoized","computeBrowserInfo","userAgent","browserInfo","system","systemVersion","isIOS","iosMajor","iosMinor","major","minor","mediaQueryNull","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent"],"mappings":"AAAA,SAASA,SAAS,EAAEC,IAAI,QAAQ,kBAAkB;AASlD,MAAMC,WAA6C,CAAC;AAEpD,OAAO,SAASC,mBAAmBC,YAAY,EAAE;IAC/C,IAAIF,QAAQ,CAACE,UAAU,EAAE;QACvB,OAAOF,QAAQ,CAACE,UAAU;IAC5B;IAEA,MAAMC,cAA2B;QAC/BD;QACAE,QAAQ;QACRC,eAAe;IACjB;IAEA,MAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,EAAE,GAAGV,UAAUI;IAEhD,IAAII,OAAO;QACTH,YAAYC,MAAM,GAAG;QACrBD,YAAYE,aAAa,GAAG;YAC1BI,OAAOF;YACPG,OAAOF;QACT;IACF;IAEAR,QAAQ,CAACE,UAAU,GAAGC;IAEtB,OAAOA;AACT;AAEA;;;;CAIC,GACD,OAAO,SAASQ,eAAeC,KAAa;IAC1C,OAAO;QACLC,SAAS;QACTC,OAAOF;QACPG,UAAUhB;QACViB,aAAajB;QACbkB,gBAAgBlB;QAChBmB,kBAAkBnB;QAClBoB,qBAAqBpB;QACrBqB;YACE,OAAO;QACT;IACF;AACF"}