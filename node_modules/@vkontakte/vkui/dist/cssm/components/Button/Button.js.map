{"version":3,"sources":["../../../../src/components/Button/Button.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, hasReactNode, noop } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { HasAlign } from '../../types';\nimport { Spinner } from '../Spinner/Spinner';\nimport { Tappable, TappableProps } from '../Tappable/Tappable';\nimport '../Spinner/Spinner.module.css';\nimport styles from './Button.module.css';\n\nconst stylesSize = {\n  s: styles['Button--size-s'],\n  m: styles['Button--size-m'],\n  l: styles['Button--size-l'],\n};\n\nconst stylesMode = {\n  primary: styles['Button--mode-primary'],\n  secondary: styles['Button--mode-secondary'],\n  tertiary: styles['Button--mode-tertiary'],\n  outline: styles['Button--mode-outline'],\n  link: styles['Button--mode-link'],\n};\n\nconst stylesAppearance = {\n  'accent': styles['Button--appearance-accent'],\n  'positive': styles['Button--appearance-positive'],\n  'negative': styles['Button--appearance-negative'],\n  'neutral': styles['Button--appearance-neutral'],\n  'overlay': styles['Button--appearance-overlay'],\n  'accent-invariable': styles['Button--appearance-accent-invariable'],\n};\n\nconst stylesAlign = {\n  left: styles['Button--align-left'],\n  center: styles['Button--align-center'],\n  right: styles['Button--align-right'],\n};\n\nconst sizeYClassNames = {\n  none: styles['Button--sizeY-none'],\n  ['regular']: styles['Button--sizeY-regular'],\n};\n\nexport interface VKUIButtonProps extends HasAlign {\n  mode?: 'primary' | 'secondary' | 'tertiary' | 'outline' | 'link';\n  appearance?: 'accent' | 'positive' | 'negative' | 'neutral' | 'overlay' | 'accent-invariable';\n  size?: 's' | 'm' | 'l';\n  stretched?: boolean;\n  before?: React.ReactNode;\n  after?: React.ReactNode;\n  loading?: boolean;\n  disableSpinnerAnimation?: boolean;\n  rounded?: boolean;\n}\n\nexport interface ButtonProps extends Omit<TappableProps, 'size'>, VKUIButtonProps {}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Button\n */\nexport const Button = ({\n  size = 's',\n  mode = 'primary',\n  appearance = 'accent',\n  stretched = false,\n  align = 'center',\n  children,\n  before,\n  after,\n  getRootRef,\n  loading,\n  onClick = noop,\n  className,\n  disableSpinnerAnimation,\n  rounded,\n  ...restProps\n}: ButtonProps) => {\n  const hasIcons = Boolean(before || after);\n  const hasIconOnly = !children && Boolean(after) !== Boolean(before);\n  const { sizeY = 'none' } = useAdaptivity();\n  const platform = usePlatform();\n\n  return (\n    <Tappable\n      hoverMode={styles['Button--hover']}\n      activeMode={styles['Button--active']}\n      Component={restProps.href ? 'a' : 'button'}\n      focusVisibleMode=\"outside\"\n      {...restProps}\n      onClick={loading ? undefined : onClick}\n      className={classNames(\n        className,\n        styles.Button,\n        stylesSize[size],\n        stylesMode[mode],\n        stylesAppearance[appearance],\n        stylesAlign[align],\n        sizeY !== 'compact' && sizeYClassNames[sizeY],\n        platform === 'ios' && styles['Button--ios'],\n        stretched && styles['Button--stretched'],\n        hasIcons && styles['Button--with-icon'],\n        hasIconOnly && !stretched && styles['Button--singleIcon'],\n        loading && styles['Button--loading'],\n        rounded && styles['Button--rounded'],\n      )}\n      getRootRef={getRootRef}\n    >\n      {loading && (\n        <Spinner\n          size=\"small\"\n          className={styles.Button__spinner}\n          disableAnimation={disableSpinnerAnimation}\n        />\n      )}\n      <span className={styles.Button__in}>\n        {hasReactNode(before) && (\n          <span\n            className={styles.Button__before}\n            role=\"presentation\"\n            data-testid={process.env.NODE_ENV === 'test' ? 'before' : undefined}\n          >\n            {before}\n          </span>\n        )}\n        {hasReactNode(children) && (\n          <span\n            className={styles.Button__content}\n            data-testid={process.env.NODE_ENV === 'test' ? 'children' : undefined}\n          >\n            {children}\n          </span>\n        )}\n        {hasReactNode(after) && (\n          <span\n            className={styles.Button__after}\n            role=\"presentation\"\n            data-testid={process.env.NODE_ENV === 'test' ? 'after' : undefined}\n          >\n            {after}\n          </span>\n        )}\n      </span>\n    </Tappable>\n  );\n};\n"],"names":["React","classNames","hasReactNode","noop","useAdaptivity","usePlatform","Spinner","Tappable","styles","stylesSize","s","m","l","stylesMode","primary","secondary","tertiary","outline","link","stylesAppearance","stylesAlign","left","center","right","sizeYClassNames","none","Button","size","mode","appearance","stretched","align","children","before","after","getRootRef","loading","onClick","className","disableSpinnerAnimation","rounded","restProps","hasIcons","Boolean","hasIconOnly","sizeY","platform","hoverMode","activeMode","Component","href","focusVisibleMode","undefined","Button__spinner","disableAnimation","span","Button__in","Button__before","role","data-testid","process","env","NODE_ENV","Button__content","Button__after"],"mappings":"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"}