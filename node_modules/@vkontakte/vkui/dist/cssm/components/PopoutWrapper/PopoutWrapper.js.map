{"version":3,"sources":["../../../../src/components/PopoutWrapper/PopoutWrapper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './PopoutWrapper.module.css';\n\nconst stylesAlignX = {\n  center: styles['PopoutWrapper--alignX-center'],\n  left: styles['PopoutWrapper--alignX-left'],\n  right: styles['PopoutWrapper--alignX-right'],\n};\n\nconst stylesAlignY = {\n  center: styles['PopoutWrapper--alignY-center'],\n  top: styles['PopoutWrapper--alignY-top'],\n  bottom: styles['PopoutWrapper--alignY-bottom'],\n};\n\nexport interface PopoutWrapperProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  /**\n   * Позволяет сделать прозрачную подложку\n   */\n  noBackground?: boolean;\n  /**\n   * Включает фиксированное позиционирование.\n   *\n   * По умолчанию у компонента не задан никакой `position`.\n   */\n  fixed?: boolean;\n  /**\n   * Выравнивает контент по горизонтали.\n   */\n  alignX?: 'left' | 'center' | 'right';\n  /**\n   * Выравнивает контент по вертикали.\n   */\n  alignY?: 'top' | 'center' | 'bottom';\n  /**\n   * Спрячет компонент через fade-out анимацию.\n   */\n  closing?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport const PopoutWrapper = ({\n  alignY = 'center',\n  alignX = 'center',\n  closing = false,\n  noBackground = false,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(noBackground);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === styles['animation-full-fade-in']) {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(onFadeInEnd, platform === 'ios' ? 300 : 200);\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['PopoutWrapper'],\n        stylesAlignY[alignY],\n        stylesAlignX[alignX],\n        closing && styles['PopoutWrapper--closing'],\n        opened && styles['PopoutWrapper--opened'],\n        fixed && styles['PopoutWrapper--fixed'],\n        !noBackground && styles['PopoutWrapper--masked'],\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n    >\n      <div className={styles['PopoutWrapper__container']}>\n        <div className={styles['PopoutWrapper__overlay']} onClick={onClick} />\n        <div className={styles['PopoutWrapper__content']}>{children}</div>\n      </div>\n    </RootComponent>\n  );\n};\n"],"names":["React","classNames","usePlatform","useTimeout","RootComponent","styles","stylesAlignX","center","left","right","stylesAlignY","top","bottom","PopoutWrapper","alignY","alignX","closing","noBackground","fixed","children","onClick","restProps","platform","opened","setOpened","useState","onFadeInEnd","e","animationName","animationFinishFallback","useEffect","set","baseClassName","onAnimationEnd","undefined","div","className"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,UAAU,QAAQ,yBAAyB;AAEpD,SAASC,aAAa,QAAQ,iCAAiC;AAC/D,OAAOC,YAAY,6BAA6B;AAEhD,MAAMC,eAAe;IACnBC,QAAQF,MAAM,CAAC,+BAA+B;IAC9CG,MAAMH,MAAM,CAAC,6BAA6B;IAC1CI,OAAOJ,MAAM,CAAC,8BAA8B;AAC9C;AAEA,MAAMK,eAAe;IACnBH,QAAQF,MAAM,CAAC,+BAA+B;IAC9CM,KAAKN,MAAM,CAAC,4BAA4B;IACxCO,QAAQP,MAAM,CAAC,+BAA+B;AAChD;AA2BA;;CAEC,GACD,OAAO,MAAMQ,gBAAgB,CAAC,EAC5BC,SAAS,QAAQ,EACjBC,SAAS,QAAQ,EACjBC,UAAU,KAAK,EACfC,eAAe,KAAK,EACpBC,QAAQ,IAAI,EACZC,QAAQ,EACRC,OAAO,EACP,GAAGC,WACgB;IACnB,MAAMC,WAAWpB;IACjB,MAAM,CAACqB,QAAQC,UAAU,GAAGxB,MAAMyB,QAAQ,CAACR;IAE3C,MAAMS,cAAc,CAACC;QACnB,IAAI,CAACA,KAAKA,EAAEC,aAAa,KAAKvB,MAAM,CAAC,yBAAyB,EAAE;YAC9DmB,UAAU;QACZ;IACF;IACA,MAAMK,0BAA0B1B,WAAWuB,aAAaJ,aAAa,QAAQ,MAAM;IACnFtB,MAAM8B,SAAS,CAAC;QACd,CAACP,UAAUM,wBAAwBE,GAAG;IACxC,GAAG;QAACF;QAAyBN;KAAO;IAEpC,qBACE,oBAACnB;QACE,GAAGiB,SAAS;QACbW,eAAe/B,WACbI,MAAM,CAAC,gBAAgB,EACvBK,YAAY,CAACI,OAAO,EACpBR,YAAY,CAACS,OAAO,EACpBC,WAAWX,MAAM,CAAC,yBAAyB,EAC3CkB,UAAUlB,MAAM,CAAC,wBAAwB,EACzCa,SAASb,MAAM,CAAC,uBAAuB,EACvC,CAACY,gBAAgBZ,MAAM,CAAC,wBAAwB;QAElD4B,gBAAgBV,SAASW,YAAYR;qBAErC,oBAACS;QAAIC,WAAW/B,MAAM,CAAC,2BAA2B;qBAChD,oBAAC8B;QAAIC,WAAW/B,MAAM,CAAC,yBAAyB;QAAEe,SAASA;sBAC3D,oBAACe;QAAIC,WAAW/B,MAAM,CAAC,yBAAyB;OAAGc;AAI3D,EAAE"}