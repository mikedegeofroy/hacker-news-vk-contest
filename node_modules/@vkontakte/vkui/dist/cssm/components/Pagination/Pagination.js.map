{"version":3,"sources":["../../../../src/components/Pagination/Pagination.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon24ChevronCompactLeft, Icon24ChevronCompactRight } from '@vkontakte/icons';\nimport { PaginationPageType, usePagination } from '../../hooks/usePagination';\nimport type { HasComponent, HTMLAttributesWithRootRef } from '../../types';\nimport { Button } from '../Button/Button';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden';\nimport { PaginationPageButton } from './PaginationPage/PaginationPageButton';\nimport { PaginationPageEllipsis } from './PaginationPage/PaginationPageEllipsis';\nimport { getPageLabelDefault } from './utils';\nimport styles from './Pagination.module.css';\n\nexport interface PaginationProps extends Omit<HTMLAttributesWithRootRef<HTMLElement>, 'onChange'> {\n  /**\n   * Текущая страница.\n   */\n  currentPage?: number;\n  /**\n   * Кол-во всегда видимых страниц по краям текущей страницы.\n   */\n  siblingCount?: number;\n  /**\n   * Кол-во всегда видимых страниц в начале и в конце.\n   */\n  boundaryCount?: number;\n  /**\n   * Общее кол-во страниц.\n   */\n  totalPages?: number;\n  /**\n   * Блокировка всех кнопок.\n   */\n  disabled?: boolean;\n  /**\n   * Переопределение текста для обозначения блока навигации.\n   * По умолчанию используется текст на \"ru_RU\".\n   */\n  navigationLabel?: string;\n  navigationLabelComponent?: HasComponent['Component'];\n  /**\n   * Переопределение текста для кнопки навигации назад.\n   * По умолчанию используется текст на \"ru_RU\".\n   */\n  prevButtonLabel?: string;\n  /**\n   * Переопределение текста для кнопки навигации вперёд.\n   * По умолчанию используется текст на \"ru_RU\".\n   */\n  nextButtonLabel?: string;\n  /**\n   * Функция для переопределения и/или локализации текста кнопки страницы.\n   * По умолчанию используется текст на \"ru_RU\".\n   */\n  getPageLabel?(isCurrent: boolean): string;\n  onChange?(page: number): void;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Pagination\n */\nexport const Pagination = ({\n  currentPage = 1,\n  siblingCount = 1,\n  boundaryCount = 1,\n  totalPages = 1,\n  disabled,\n  getPageLabel = getPageLabelDefault,\n  navigationLabel = 'Навигация по страницам',\n  navigationLabelComponent = 'h2',\n  prevButtonLabel = 'Перейти на предыдущую страницу',\n  nextButtonLabel = 'Перейти на следующую страницу',\n  onChange,\n  ...resetProps\n}: PaginationProps) => {\n  const pages = usePagination({\n    currentPage,\n    totalPages,\n    siblingCount,\n    boundaryCount,\n  });\n  const isFirstPage = currentPage === 1;\n  const isLastPage = currentPage === totalPages;\n\n  const handlePrevClick = React.useCallback(() => {\n    if (onChange && !isFirstPage) {\n      onChange(currentPage - 1);\n    }\n  }, [currentPage, isFirstPage, onChange]);\n\n  const handleClick = React.useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      const page: string = event.currentTarget.dataset.page || '1';\n      onChange?.(Number(page));\n    },\n    [onChange],\n  );\n\n  const handleNextClick = React.useCallback(() => {\n    if (onChange && !isLastPage) {\n      onChange(currentPage + 1);\n    }\n  }, [currentPage, isLastPage, onChange]);\n\n  const renderPages = React.useCallback(\n    (page: PaginationPageType) => {\n      switch (page) {\n        case 'start-ellipsis':\n        case 'end-ellipsis':\n          return (\n            <li key={page}>\n              <PaginationPageEllipsis disabled={disabled} />\n            </li>\n          );\n        default: {\n          const isCurrent = page === currentPage;\n          return (\n            <li key={page}>\n              <PaginationPageButton\n                getPageLabel={getPageLabel}\n                isCurrent={isCurrent}\n                onClick={handleClick}\n                disabled={disabled}\n              >\n                {page}\n              </PaginationPageButton>\n            </li>\n          );\n        }\n      }\n    },\n    [currentPage, disabled, getPageLabel, handleClick],\n  );\n\n  return (\n    <RootComponent Component=\"nav\" role=\"navigation\" {...resetProps}>\n      <VisuallyHidden Component={navigationLabelComponent}>{navigationLabel}</VisuallyHidden>\n      <ul className={styles['Pagination__list']}>\n        <li className={styles['Pagination__prevButtonContainer']}>\n          <Button\n            size=\"l\"\n            before={\n              <>\n                <VisuallyHidden>{prevButtonLabel}</VisuallyHidden>{' '}\n                <Icon24ChevronCompactLeft width={24} />\n              </>\n            }\n            appearance=\"accent\"\n            mode=\"tertiary\"\n            disabled={isFirstPage || disabled}\n            onClick={handlePrevClick}\n          />\n        </li>\n        {pages.map(renderPages)}\n        <li className={styles['Pagination__nextButtonContainer']}>\n          <Button\n            size=\"l\"\n            after={\n              <>\n                <VisuallyHidden>{nextButtonLabel}</VisuallyHidden>\n                <Icon24ChevronCompactRight width={24} />\n              </>\n            }\n            appearance=\"accent\"\n            mode=\"tertiary\"\n            disabled={isLastPage || disabled}\n            onClick={handleNextClick}\n          />\n        </li>\n      </ul>\n    </RootComponent>\n  );\n};\n"],"names":["React","Icon24ChevronCompactLeft","Icon24ChevronCompactRight","usePagination","Button","RootComponent","VisuallyHidden","PaginationPageButton","PaginationPageEllipsis","getPageLabelDefault","styles","Pagination","currentPage","siblingCount","boundaryCount","totalPages","disabled","getPageLabel","navigationLabel","navigationLabelComponent","prevButtonLabel","nextButtonLabel","onChange","resetProps","pages","isFirstPage","isLastPage","handlePrevClick","useCallback","handleClick","event","page","currentTarget","dataset","Number","handleNextClick","renderPages","li","key","isCurrent","onClick","Component","role","ul","className","size","before","width","appearance","mode","map","after"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,wBAAwB,EAAEC,yBAAyB,QAAQ,mBAAmB;AACvF,SAA6BC,aAAa,QAAQ,4BAA4B;AAE9E,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,SAASC,aAAa,QAAQ,iCAAiC;AAC/D,SAASC,cAAc,QAAQ,mCAAmC;AAClE,SAASC,oBAAoB,QAAQ,wCAAwC;AAC7E,SAASC,sBAAsB,QAAQ,0CAA0C;AACjF,SAASC,mBAAmB,QAAQ,UAAU;AAC9C,OAAOC,YAAY,0BAA0B;AA+C7C;;CAEC,GACD,OAAO,MAAMC,aAAa,CAAC,EACzBC,cAAc,CAAC,EACfC,eAAe,CAAC,EAChBC,gBAAgB,CAAC,EACjBC,aAAa,CAAC,EACdC,QAAQ,EACRC,eAAeR,mBAAmB,EAClCS,kBAAkB,wBAAwB,EAC1CC,2BAA2B,IAAI,EAC/BC,kBAAkB,gCAAgC,EAClDC,kBAAkB,+BAA+B,EACjDC,QAAQ,EACR,GAAGC,YACa;IAChB,MAAMC,QAAQrB,cAAc;QAC1BS;QACAG;QACAF;QACAC;IACF;IACA,MAAMW,cAAcb,gBAAgB;IACpC,MAAMc,aAAad,gBAAgBG;IAEnC,MAAMY,kBAAkB3B,MAAM4B,WAAW,CAAC;QACxC,IAAIN,YAAY,CAACG,aAAa;YAC5BH,SAASV,cAAc;QACzB;IACF,GAAG;QAACA;QAAaa;QAAaH;KAAS;IAEvC,MAAMO,cAAc7B,MAAM4B,WAAW,CACnC,CAACE;QACC,MAAMC,OAAeD,MAAME,aAAa,CAACC,OAAO,CAACF,IAAI,IAAI;QACzDT,WAAWY,OAAOH;IACpB,GACA;QAACT;KAAS;IAGZ,MAAMa,kBAAkBnC,MAAM4B,WAAW,CAAC;QACxC,IAAIN,YAAY,CAACI,YAAY;YAC3BJ,SAASV,cAAc;QACzB;IACF,GAAG;QAACA;QAAac;QAAYJ;KAAS;IAEtC,MAAMc,cAAcpC,MAAM4B,WAAW,CACnC,CAACG;QACC,OAAQA;YACN,KAAK;YACL,KAAK;gBACH,qBACE,oBAACM;oBAAGC,KAAKP;iCACP,oBAACvB;oBAAuBQ,UAAUA;;YAGxC;gBAAS;oBACP,MAAMuB,YAAYR,SAASnB;oBAC3B,qBACE,oBAACyB;wBAAGC,KAAKP;qCACP,oBAACxB;wBACCU,cAAcA;wBACdsB,WAAWA;wBACXC,SAASX;wBACTb,UAAUA;uBAETe;gBAIT;QACF;IACF,GACA;QAACnB;QAAaI;QAAUC;QAAcY;KAAY;IAGpD,qBACE,oBAACxB;QAAcoC,WAAU;QAAMC,MAAK;QAAc,GAAGnB,UAAU;qBAC7D,oBAACjB;QAAemC,WAAWtB;OAA2BD,gCACtD,oBAACyB;QAAGC,WAAWlC,MAAM,CAAC,mBAAmB;qBACvC,oBAAC2B;QAAGO,WAAWlC,MAAM,CAAC,kCAAkC;qBACtD,oBAACN;QACCyC,MAAK;QACLC,sBACE,wDACE,oBAACxC,sBAAgBc,kBAAkC,mBACnD,oBAACnB;YAAyB8C,OAAO;;QAGrCC,YAAW;QACXC,MAAK;QACLjC,UAAUS,eAAeT;QACzBwB,SAASb;SAGZH,MAAM0B,GAAG,CAACd,4BACX,oBAACC;QAAGO,WAAWlC,MAAM,CAAC,kCAAkC;qBACtD,oBAACN;QACCyC,MAAK;QACLM,qBACE,wDACE,oBAAC7C,sBAAgBe,gCACjB,oBAACnB;YAA0B6C,OAAO;;QAGtCC,YAAW;QACXC,MAAK;QACLjC,UAAUU,cAAcV;QACxBwB,SAASL;;AAMrB,EAAE"}