{"version":3,"sources":["../../../../src/components/CalendarDay/CalendarDay.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { ENABLE_KEYBOARD_INPUT_EVENT_NAME } from '../../hooks/useKeyboardInputTracker';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { Tappable } from '../Tappable/Tappable';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden';\nimport styles from './CalendarDay.module.css';\n\nexport type CalendarDayElementProps = Omit<\n  React.AllHTMLAttributes<HTMLElement>,\n  'onChange' | 'size' | 'disabled' | 'selected'\n>;\n\nexport interface CalendarDayProps extends CalendarDayElementProps {\n  day: Date;\n  today?: boolean;\n  selected?: boolean;\n  selectionStart?: boolean;\n  selectionEnd?: boolean;\n  hintedSelectionStart?: boolean;\n  hintedSelectionEnd?: boolean;\n  active?: boolean;\n  hidden?: boolean;\n  disabled?: boolean;\n  focused?: boolean;\n  hinted?: boolean;\n  sameMonth?: boolean;\n  size?: 's' | 'm';\n  onChange(value: Date): void;\n  onEnter?(value: Date): void;\n  onLeave?(value: Date): void;\n}\n\nexport const CalendarDay = React.memo(\n  ({\n    day,\n    today,\n    selected,\n    onChange,\n    hidden,\n    disabled,\n    active,\n    selectionStart,\n    selectionEnd,\n    focused,\n    onEnter,\n    onLeave,\n    hinted,\n    hintedSelectionStart,\n    hintedSelectionEnd,\n    sameMonth,\n    size,\n    className,\n    children,\n    ...restProps\n  }: CalendarDayProps) => {\n    const { locale } = useConfigProvider();\n    const ref = React.useRef<HTMLElement>(null);\n    const onClick = React.useCallback(() => onChange(day), [day, onChange]);\n    const handleEnter = React.useCallback(() => onEnter?.(day), [day, onEnter]);\n    const handleLeave = React.useCallback(() => onLeave?.(day), [day, onLeave]);\n\n    const label = new Intl.DateTimeFormat(locale, {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    }).format(day);\n\n    React.useEffect(() => {\n      if (focused && ref.current) {\n        ref.current.dispatchEvent(new Event(ENABLE_KEYBOARD_INPUT_EVENT_NAME, { bubbles: true }));\n        ref.current.focus();\n      }\n    }, [focused]);\n\n    if (hidden) {\n      return <div className={styles['CalendarDay__hidden']} />;\n    }\n\n    return (\n      <Tappable\n        className={classNames(\n          styles['CalendarDay'],\n          size === 's' && styles['CalendarDay--size-s'],\n          today && styles['CalendarDay--today'],\n          selected && !disabled && styles['CalendarDay--selected'],\n          selectionStart && styles['CalendarDay--selection-start'],\n          selectionEnd && styles['CalendarDay--selection-end'],\n          disabled && styles['CalendarDay--disabled'],\n          !sameMonth && styles['CalendarDay--not-same-month'],\n          className,\n        )}\n        hoverMode={active ? '' : styles['CalendarDay--hover']}\n        hasActive={false}\n        onClick={onClick}\n        disabled={disabled}\n        tabIndex={-1}\n        getRootRef={ref}\n        focusVisibleMode={active ? 'outside' : 'inside'}\n        onPointerEnter={handleEnter}\n        onPointerLeave={handleLeave}\n        {...restProps}\n      >\n        <div\n          className={classNames(\n            styles['CalendarDay__hinted'],\n            hinted && styles['CalendarDay__hinted--active'],\n            hintedSelectionStart && styles['CalendarDay__hinted--selection-start'],\n            hintedSelectionEnd && styles['CalendarDay__hinted--selection-end'],\n          )}\n        >\n          <div\n            className={classNames(\n              styles['CalendarDay__inner'],\n              active && !disabled && styles['CalendarDay__inner--active'],\n            )}\n          >\n            <div className={styles['CalendarDay__day-number']}>\n              <VisuallyHidden>{children ?? label}</VisuallyHidden>\n              <span aria-hidden>{day.getDate()}</span>\n            </div>\n          </div>\n        </div>\n      </Tappable>\n    );\n  },\n);\n\nCalendarDay.displayName = 'CalendarDay';\n"],"names":["React","classNames","ENABLE_KEYBOARD_INPUT_EVENT_NAME","useConfigProvider","Tappable","VisuallyHidden","styles","CalendarDay","memo","day","today","selected","onChange","hidden","disabled","active","selectionStart","selectionEnd","focused","onEnter","onLeave","hinted","hintedSelectionStart","hintedSelectionEnd","sameMonth","size","className","children","restProps","locale","ref","useRef","onClick","useCallback","handleEnter","handleLeave","label","Intl","DateTimeFormat","weekday","year","month","format","useEffect","current","dispatchEvent","Event","bubbles","focus","div","hoverMode","hasActive","tabIndex","getRootRef","focusVisibleMode","onPointerEnter","onPointerLeave","span","aria-hidden","getDate","displayName"],"mappings":"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"}