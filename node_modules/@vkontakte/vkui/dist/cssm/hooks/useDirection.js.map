{"version":3,"sources":["../../../src/hooks/useDirection.ts"],"sourcesContent":["import * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\ntype Direction = 'ltr' | 'rtl';\ntype WritingMode = 'horizontal-tb' | 'vertical-rl' | 'vertical-lr';\n\n/**\n * Определяет направление текста элемента.\n *\n * ## Ограничения\n *\n * - Не следит за изменением направлением.\n * - Определяется только на второй рендер.\n *\n * ## Пример\n *\n * ```jsx\n * import { strict as assert } from 'node:assert';\n *\n * const Component = () => {\n *   const [ref, direction, writingMode] = useDirection();\n *\n *   React.useEffect(()=>{\n *     if (!direction || !writingMode) {\n *       return\n *     }\n *\n *     assert.equal(direction, 'ltr')\n *     assert.equal(writingMode, 'vertical-rl')\n *   }, [direction, writingMode])\n *\n *   return <div ref={ref} style={{writingMode: 'vertical-rl'}}>我家没有电脑。</div>\n * }\n * ```\n */\nexport function useDirection<T extends HTMLElement>(): [\n  React.RefObject<T>,\n  Direction | undefined,\n  WritingMode | undefined,\n] {\n  const ref = React.useRef<T>(null);\n\n  const [direction, setDirection] = React.useState<Direction | undefined>(undefined);\n  const [writingMode, setWritingMode] = React.useState<WritingMode | undefined>(undefined);\n\n  const { window } = useDOM();\n\n  const update = () => {\n    if (!window || !ref.current) {\n      return;\n    }\n\n    const styleDeclaration = window.getComputedStyle(ref.current);\n\n    setDirection(styleDeclaration.direction as Direction);\n    setWritingMode(styleDeclaration.writingMode as WritingMode);\n  };\n\n  useIsomorphicLayoutEffect(update, [window]);\n\n  return [ref, direction, writingMode];\n}\n"],"names":["React","useDOM","useIsomorphicLayoutEffect","useDirection","ref","useRef","direction","setDirection","useState","undefined","writingMode","setWritingMode","window","update","current","styleDeclaration","getComputedStyle"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,yBAAyB,QAAQ,mCAAmC;AAK7E;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA4BC,GACD,OAAO,SAASC;IAKd,MAAMC,MAAMJ,MAAMK,MAAM,CAAI;IAE5B,MAAM,CAACC,WAAWC,aAAa,GAAGP,MAAMQ,QAAQ,CAAwBC;IACxE,MAAM,CAACC,aAAaC,eAAe,GAAGX,MAAMQ,QAAQ,CAA0BC;IAE9E,MAAM,EAAEG,MAAM,EAAE,GAAGX;IAEnB,MAAMY,SAAS;QACb,IAAI,CAACD,UAAU,CAACR,IAAIU,OAAO,EAAE;YAC3B;QACF;QAEA,MAAMC,mBAAmBH,OAAOI,gBAAgB,CAACZ,IAAIU,OAAO;QAE5DP,aAAaQ,iBAAiBT,SAAS;QACvCK,eAAeI,iBAAiBL,WAAW;IAC7C;IAEAR,0BAA0BW,QAAQ;QAACD;KAAO;IAE1C,OAAO;QAACR;QAAKE;QAAWI;KAAY;AACtC"}