{"version":3,"sources":["../../../../src/hooks/useDraggableWithDomApi/utils.ts"],"sourcesContent":["import type { Direction, DraggingItem, PlaceholderItem, SiblingItem } from './types';\n\nexport const getTargetIsOverOrUnderElData = (clientY: number, elRect: DOMRect) => {\n  const elRectHalfHeight = elRect.height / 2;\n  return {\n    isUnderEl: clientY <= elRect.bottom - elRectHalfHeight,\n    isOverEl: clientY >= elRect.top + elRectHalfHeight,\n  };\n};\n\nexport const setDraggingItemShiftStyles = (draggingEl: HTMLElement, nextShiftY: number) => {\n  requestAnimationFrame(() => {\n    draggingEl.style.transform = `translateY(${nextShiftY}px)`;\n  });\n};\n\nexport const setSiblingItemsShiftStyles = ([\n  {\n    el,\n    draggingElRect: { height },\n  },\n  direction,\n]: [Omit<SiblingItem, 'shifted'>, Direction]) => {\n  requestAnimationFrame(() => {\n    if (direction === 'up') {\n      el.style.setProperty('transition', 'transform 0.3s ease-in 0s');\n      el.style.removeProperty('transform');\n    } else {\n      el.style.setProperty('transition', 'transform 0.3s ease-out 0s');\n      el.style.setProperty('transform', `translateY(${height}px)`);\n    }\n  });\n};\n\nexport const setInitialDraggingItemStyles = ({ el, draggingElRect }: DraggingItem) => {\n  const { top, left, width, height } = draggingElRect;\n  requestAnimationFrame(() => {\n    // Inspired by https://github.com/hello-pangea/dnd\n    el.style.setProperty('pointer-events', 'none');\n    el.style.setProperty('position', 'fixed');\n    el.style.setProperty('top', `${top}px`);\n    el.style.setProperty('left', `${left}px`);\n    el.style.setProperty('width', `${width}px`);\n    el.style.setProperty('height', `${height}px`);\n    el.style.setProperty('z-index', 'var(--vkui_internal--z_index_cell_dragging)');\n    el.style.setProperty('box-sizing', 'border-box');\n    el.style.setProperty('transform', 'translateY(0)');\n  });\n};\n\nexport const unsetInitialDraggingItemStyles = ({ el }: DraggingItem) => {\n  requestAnimationFrame(() => {\n    el.style.removeProperty('pointer-events');\n    el.style.removeProperty('position');\n    el.style.removeProperty('top');\n    el.style.removeProperty('left');\n    el.style.removeProperty('width');\n    el.style.removeProperty('height');\n    el.style.removeProperty('z-index');\n    el.style.removeProperty('box-sizing');\n    el.style.removeProperty('transform');\n  });\n};\n\nexport const setInitialPlaceholderItemStyles = ({ el, draggingElRect }: PlaceholderItem) => {\n  if (el.firstElementChild) {\n    return;\n  }\n  const { width, height } = draggingElRect;\n  const node = el.cloneNode() as HTMLElement;\n  node.style.setProperty('display', 'block');\n  node.style.setProperty('width', `${width}px`);\n  node.style.setProperty('height', `${height}px`);\n  node.style.setProperty('pointer-events', 'none');\n  el.appendChild(node);\n};\n\nexport const unsetInitialPlaceholderItemStyles = ({ el }: PlaceholderItem) => {\n  if (el.firstElementChild) {\n    el.firstElementChild.remove();\n  }\n};\n\nexport const setInitialSiblingItemStyles = ({ el, shifted, draggingElRect }: SiblingItem) => {\n  const { height } = draggingElRect;\n  requestAnimationFrame(() => {\n    el.style.setProperty('pointer-events', 'none');\n    el.style.setProperty('transition', 'none 0s ease 0s');\n\n    if (shifted) {\n      el.style.setProperty('transform', `translateY(${height}px)`);\n    }\n  });\n};\n\nexport const unsetInitialSiblingItemStyles = ({ el }: Omit<SiblingItem, 'shifted'>) => {\n  requestAnimationFrame(() => {\n    el.style.removeProperty('pointer-events');\n    el.style.removeProperty('transition');\n    el.style.removeProperty('transform');\n  });\n};\n"],"names":["getTargetIsOverOrUnderElData","clientY","elRect","elRectHalfHeight","height","isUnderEl","bottom","isOverEl","top","setDraggingItemShiftStyles","draggingEl","nextShiftY","requestAnimationFrame","style","transform","setSiblingItemsShiftStyles","el","draggingElRect","direction","setProperty","removeProperty","setInitialDraggingItemStyles","left","width","unsetInitialDraggingItemStyles","setInitialPlaceholderItemStyles","firstElementChild","node","cloneNode","appendChild","unsetInitialPlaceholderItemStyles","remove","setInitialSiblingItemStyles","shifted","unsetInitialSiblingItemStyles"],"mappings":"AAEA,OAAO,MAAMA,+BAA+B,CAACC,SAAiBC;IAC5D,MAAMC,mBAAmBD,OAAOE,MAAM,GAAG;IACzC,OAAO;QACLC,WAAWJ,WAAWC,OAAOI,MAAM,GAAGH;QACtCI,UAAUN,WAAWC,OAAOM,GAAG,GAAGL;IACpC;AACF,EAAE;AAEF,OAAO,MAAMM,6BAA6B,CAACC,YAAyBC;IAClEC,sBAAsB;QACpBF,WAAWG,KAAK,CAACC,SAAS,GAAG,CAAC,WAAW,EAAEH,WAAW,GAAG,CAAC;IAC5D;AACF,EAAE;AAEF,OAAO,MAAMI,6BAA6B,CAAC,CACzC,EACEC,EAAE,EACFC,gBAAgB,EAAEb,MAAM,EAAE,EAC3B,EACDc,UAC0C;IAC1CN,sBAAsB;QACpB,IAAIM,cAAc,MAAM;YACtBF,GAAGH,KAAK,CAACM,WAAW,CAAC,cAAc;YACnCH,GAAGH,KAAK,CAACO,cAAc,CAAC;QAC1B,OAAO;YACLJ,GAAGH,KAAK,CAACM,WAAW,CAAC,cAAc;YACnCH,GAAGH,KAAK,CAACM,WAAW,CAAC,aAAa,CAAC,WAAW,EAAEf,OAAO,GAAG,CAAC;QAC7D;IACF;AACF,EAAE;AAEF,OAAO,MAAMiB,+BAA+B,CAAC,EAAEL,EAAE,EAAEC,cAAc,EAAgB;IAC/E,MAAM,EAAET,GAAG,EAAEc,IAAI,EAAEC,KAAK,EAAEnB,MAAM,EAAE,GAAGa;IACrCL,sBAAsB;QACpB,kDAAkD;QAClDI,GAAGH,KAAK,CAACM,WAAW,CAAC,kBAAkB;QACvCH,GAAGH,KAAK,CAACM,WAAW,CAAC,YAAY;QACjCH,GAAGH,KAAK,CAACM,WAAW,CAAC,OAAO,CAAC,EAAEX,IAAI,EAAE,CAAC;QACtCQ,GAAGH,KAAK,CAACM,WAAW,CAAC,QAAQ,CAAC,EAAEG,KAAK,EAAE,CAAC;QACxCN,GAAGH,KAAK,CAACM,WAAW,CAAC,SAAS,CAAC,EAAEI,MAAM,EAAE,CAAC;QAC1CP,GAAGH,KAAK,CAACM,WAAW,CAAC,UAAU,CAAC,EAAEf,OAAO,EAAE,CAAC;QAC5CY,GAAGH,KAAK,CAACM,WAAW,CAAC,WAAW;QAChCH,GAAGH,KAAK,CAACM,WAAW,CAAC,cAAc;QACnCH,GAAGH,KAAK,CAACM,WAAW,CAAC,aAAa;IACpC;AACF,EAAE;AAEF,OAAO,MAAMK,iCAAiC,CAAC,EAAER,EAAE,EAAgB;IACjEJ,sBAAsB;QACpBI,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;IAC1B;AACF,EAAE;AAEF,OAAO,MAAMK,kCAAkC,CAAC,EAAET,EAAE,EAAEC,cAAc,EAAmB;IACrF,IAAID,GAAGU,iBAAiB,EAAE;QACxB;IACF;IACA,MAAM,EAAEH,KAAK,EAAEnB,MAAM,EAAE,GAAGa;IAC1B,MAAMU,OAAOX,GAAGY,SAAS;IACzBD,KAAKd,KAAK,CAACM,WAAW,CAAC,WAAW;IAClCQ,KAAKd,KAAK,CAACM,WAAW,CAAC,SAAS,CAAC,EAAEI,MAAM,EAAE,CAAC;IAC5CI,KAAKd,KAAK,CAACM,WAAW,CAAC,UAAU,CAAC,EAAEf,OAAO,EAAE,CAAC;IAC9CuB,KAAKd,KAAK,CAACM,WAAW,CAAC,kBAAkB;IACzCH,GAAGa,WAAW,CAACF;AACjB,EAAE;AAEF,OAAO,MAAMG,oCAAoC,CAAC,EAAEd,EAAE,EAAmB;IACvE,IAAIA,GAAGU,iBAAiB,EAAE;QACxBV,GAAGU,iBAAiB,CAACK,MAAM;IAC7B;AACF,EAAE;AAEF,OAAO,MAAMC,8BAA8B,CAAC,EAAEhB,EAAE,EAAEiB,OAAO,EAAEhB,cAAc,EAAe;IACtF,MAAM,EAAEb,MAAM,EAAE,GAAGa;IACnBL,sBAAsB;QACpBI,GAAGH,KAAK,CAACM,WAAW,CAAC,kBAAkB;QACvCH,GAAGH,KAAK,CAACM,WAAW,CAAC,cAAc;QAEnC,IAAIc,SAAS;YACXjB,GAAGH,KAAK,CAACM,WAAW,CAAC,aAAa,CAAC,WAAW,EAAEf,OAAO,GAAG,CAAC;QAC7D;IACF;AACF,EAAE;AAEF,OAAO,MAAM8B,gCAAgC,CAAC,EAAElB,EAAE,EAAgC;IAChFJ,sBAAsB;QACpBI,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;QACxBJ,GAAGH,KAAK,CAACO,cAAc,CAAC;IAC1B;AACF,EAAE"}