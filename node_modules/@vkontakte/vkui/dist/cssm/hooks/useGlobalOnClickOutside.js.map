{"version":3,"sources":["../../../src/hooks/useGlobalOnClickOutside.ts"],"sourcesContent":["import * as React from 'react';\nimport { isElement, useDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\n/**\n * Завязывается на document.\n *\n * @private\n */\nexport const useGlobalOnClickOutside = <\n  T extends React.RefObject<ElementType> | undefined | null,\n  ElementType extends Element = Element,\n>(\n  callback: (event: MouseEvent) => void,\n  ...refs: T[]\n) => {\n  const { document } = useDOM();\n  useIsomorphicLayoutEffect(() => {\n    const someRefNotNull = refs.some((ref) => ref && ref.current !== null);\n    if (!document || !someRefNotNull) {\n      return;\n    }\n    const handleClick = (event: MouseEvent) => {\n      const targetEl = event.target;\n      const someRefHasTargetEl =\n        isElement(targetEl) &&\n        refs.some((ref) => ref && ref.current && ref.current.contains(targetEl));\n      if (!someRefHasTargetEl) {\n        callback(event);\n      }\n    };\n    document.addEventListener('click', handleClick, {\n      passive: true,\n      capture: true,\n    });\n    return () => {\n      document.removeEventListener('click', handleClick, true);\n    };\n  }, [document, callback, ...refs]);\n};\n"],"names":["React","isElement","useDOM","useIsomorphicLayoutEffect","useGlobalOnClickOutside","callback","refs","document","someRefNotNull","some","ref","current","handleClick","event","targetEl","target","someRefHasTargetEl","contains","addEventListener","passive","capture","removeEventListener"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,SAAS,EAAEC,MAAM,QAAQ,aAAa;AAC/C,SAASC,yBAAyB,QAAQ,mCAAmC;AAE7E;;;;CAIC,GACD,OAAO,MAAMC,0BAA0B,CAIrCC,UACA,GAAGC;IAEH,MAAM,EAAEC,QAAQ,EAAE,GAAGL;IACrBC,0BAA0B;QACxB,MAAMK,iBAAiBF,KAAKG,IAAI,CAAC,CAACC,MAAQA,OAAOA,IAAIC,OAAO,KAAK;QACjE,IAAI,CAACJ,YAAY,CAACC,gBAAgB;YAChC;QACF;QACA,MAAMI,cAAc,CAACC;YACnB,MAAMC,WAAWD,MAAME,MAAM;YAC7B,MAAMC,qBACJf,UAAUa,aACVR,KAAKG,IAAI,CAAC,CAACC,MAAQA,OAAOA,IAAIC,OAAO,IAAID,IAAIC,OAAO,CAACM,QAAQ,CAACH;YAChE,IAAI,CAACE,oBAAoB;gBACvBX,SAASQ;YACX;QACF;QACAN,SAASW,gBAAgB,CAAC,SAASN,aAAa;YAC9CO,SAAS;YACTC,SAAS;QACX;QACA,OAAO;YACLb,SAASc,mBAAmB,CAAC,SAAST,aAAa;QACrD;IACF,GAAG;QAACL;QAAUF;WAAaC;KAAK;AAClC,EAAE"}