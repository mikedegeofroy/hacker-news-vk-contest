{"version":3,"sources":["../../../../src/lib/react/simulateReactInput.ts"],"sourcesContent":["/* istanbul ignore file */\n\nexport interface SimulateReactInputTargetState {\n  _valueTracker?: {\n    getValue(): string;\n    setValue(value: string): void;\n    stopTracking(): void;\n  };\n}\n\n/**\n * @see https://github.com/facebook/react/issues/11488#issuecomment-347775628\n *\n * @private\n */\nexport const simulateReactInput = (\n  target: HTMLInputElement & SimulateReactInputTargetState,\n  nextValue = '',\n) => {\n  try {\n    const prevValue = target.value;\n    target.value = nextValue;\n    const tracker = target._valueTracker;\n    if (tracker) {\n      tracker.setValue(prevValue);\n    }\n    const event = new Event('input', { bubbles: true });\n    target.dispatchEvent(event);\n  } catch (error) {\n    // Чтобы в будущем узнать, что это решение уже не работает.\n    if (process.env.NODE_ENV === 'development') {\n      throw error;\n    }\n  }\n};\n"],"names":["simulateReactInput","target","nextValue","prevValue","value","tracker","_valueTracker","setValue","event","Event","bubbles","dispatchEvent","error","process","env","NODE_ENV"],"mappings":"AAAA,wBAAwB,GAUxB;;;;CAIC,GACD,OAAO,MAAMA,qBAAqB,CAChCC,QACAC,YAAY,EAAE;IAEd,IAAI;QACF,MAAMC,YAAYF,OAAOG,KAAK;QAC9BH,OAAOG,KAAK,GAAGF;QACf,MAAMG,UAAUJ,OAAOK,aAAa;QACpC,IAAID,SAAS;YACXA,QAAQE,QAAQ,CAACJ;QACnB;QACA,MAAMK,QAAQ,IAAIC,MAAM,SAAS;YAAEC,SAAS;QAAK;QACjDT,OAAOU,aAAa,CAACH;IACvB,EAAE,OAAOI,OAAO;QACd,2DAA2D;QAC3D,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;YAC1C,MAAMH;QACR;IACF;AACF,EAAE"}