{"version":3,"sources":["../../../../src/lib/floating/functions.ts"],"sourcesContent":["import * as React from 'react';\nimport type {\n  AutoPlacementType,\n  FloatingPositionStrategy,\n  Placement,\n  PlacementWithAuto,\n  UseFloatingData,\n} from './types/common';\n\nexport function checkIsNotAutoPlacement(placement: PlacementWithAuto): placement is Placement {\n  return !placement.startsWith('auto');\n}\n\nexport function getAutoPlacementAlign(placement: AutoPlacementType): 'start' | 'end' | null {\n  const align = placement.replace(/auto-|auto/, '');\n  return align === 'start' || align === 'end' ? align : null;\n}\n\n/**\n * Note: не используем `translate3d`, чтобы в лишний раз не выносить в отдельный слой и не занимать память в GPU.\n *\n * см. https://floating-ui.com/docs/react#positioning\n */\nexport function convertFloatingDataToReactCSSProperties(\n  strategy: FloatingPositionStrategy,\n  x: UseFloatingData['x'],\n  y: UseFloatingData['y'],\n  initialWidth: React.CSSProperties['width'] | null = 'max-content',\n  middlewareData?: UseFloatingData['middlewareData'],\n): React.CSSProperties {\n  const styles: React.CSSProperties = {\n    position: strategy,\n    top: y,\n    right: 'auto',\n    bottom: 'auto',\n    left: x,\n  };\n  if (initialWidth !== null) {\n    styles.width = initialWidth;\n  }\n  if (middlewareData) {\n    const hide = middlewareData.hide;\n    if (hide && hide.referenceHidden) {\n      styles['visibility'] = 'hidden';\n    }\n  }\n  return styles;\n}\n\nexport const getArrowCoordsByMiddlewareData = (\n  middlewareData: UseFloatingData['middlewareData'],\n) => {\n  const coords = { x: 0, y: 0 };\n  if (middlewareData.arrow) {\n    const { x = 0, y = 0 } = middlewareData.arrow;\n    coords.x = x;\n    coords.y = y;\n  }\n  return coords;\n};\n"],"names":["React","checkIsNotAutoPlacement","placement","startsWith","getAutoPlacementAlign","align","replace","convertFloatingDataToReactCSSProperties","strategy","x","y","initialWidth","middlewareData","styles","position","top","right","bottom","left","width","hide","referenceHidden","getArrowCoordsByMiddlewareData","coords","arrow"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAS/B,OAAO,SAASC,wBAAwBC,SAA4B;IAClE,OAAO,CAACA,UAAUC,UAAU,CAAC;AAC/B;AAEA,OAAO,SAASC,sBAAsBF,SAA4B;IAChE,MAAMG,QAAQH,UAAUI,OAAO,CAAC,cAAc;IAC9C,OAAOD,UAAU,WAAWA,UAAU,QAAQA,QAAQ;AACxD;AAEA;;;;CAIC,GACD,OAAO,SAASE,wCACdC,QAAkC,EAClCC,CAAuB,EACvBC,CAAuB,EACvBC,eAAoD,aAAa,EACjEC,cAAkD;IAElD,MAAMC,SAA8B;QAClCC,UAAUN;QACVO,KAAKL;QACLM,OAAO;QACPC,QAAQ;QACRC,MAAMT;IACR;IACA,IAAIE,iBAAiB,MAAM;QACzBE,OAAOM,KAAK,GAAGR;IACjB;IACA,IAAIC,gBAAgB;QAClB,MAAMQ,OAAOR,eAAeQ,IAAI;QAChC,IAAIA,QAAQA,KAAKC,eAAe,EAAE;YAChCR,MAAM,CAAC,aAAa,GAAG;QACzB;IACF;IACA,OAAOA;AACT;AAEA,OAAO,MAAMS,iCAAiC,CAC5CV;IAEA,MAAMW,SAAS;QAAEd,GAAG;QAAGC,GAAG;IAAE;IAC5B,IAAIE,eAAeY,KAAK,EAAE;QACxB,MAAM,EAAEf,IAAI,CAAC,EAAEC,IAAI,CAAC,EAAE,GAAGE,eAAeY,KAAK;QAC7CD,OAAOd,CAAC,GAAGA;QACXc,OAAOb,CAAC,GAAGA;IACb;IACA,OAAOa;AACT,EAAE"}