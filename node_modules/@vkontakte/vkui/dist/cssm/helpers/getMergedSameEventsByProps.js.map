{"version":3,"sources":["../../../src/helpers/getMergedSameEventsByProps.ts"],"sourcesContent":["import * as React from 'react';\nimport type { AnyFunction } from '@vkontakte/vkjs';\nimport type { PickOnlyFunctionProps } from '../types';\n\nconst isFunctionExistInProps = <Props extends Record<PropertyKey, any>>(\n  props: Props,\n  key: PropertyKey,\n): key is Extract<keyof Props, AnyFunction> => typeof props[key] === 'function';\n\n/**\n * Полезен, когда нужно сохранить пользовательские события.\n *\n * Приоритет даём пользовательскому событию. Например, можно будет отловить был ли вызван\n * `event.preventDefault()` через `event.defaultPrevented`.\n *\n * @private\n */\nexport const getMergedSameEventsByProps = <\n  T extends keyof JSX.IntrinsicElements | React.JSXElementConstructor<any>,\n  MainProps extends React.ComponentProps<T>,\n  OnlyFnPropsByMain extends PickOnlyFunctionProps<MainProps>,\n>(\n  mainProps: MainProps,\n  secondProps: React.ComponentProps<T>,\n) => {\n  const result: {\n    [K in keyof OnlyFnPropsByMain]?:\n      | ((this: any, ...args: Parameters<OnlyFnPropsByMain[K]>) => void)\n      | undefined;\n  } = {};\n\n  for (const eventName in mainProps) {\n    if (\n      mainProps.hasOwnProperty(eventName) &&\n      secondProps.hasOwnProperty(eventName) &&\n      isFunctionExistInProps(mainProps, eventName) &&\n      isFunctionExistInProps(secondProps, eventName)\n    ) {\n      result[eventName] = function mergeSameEventsByProps(\n        ...args: Parameters<OnlyFnPropsByMain[typeof eventName]>\n      ) {\n        secondProps[eventName].apply(this, args);\n        mainProps[eventName].apply(this, args);\n      };\n    }\n  }\n  return result;\n};\n"],"names":["React","isFunctionExistInProps","props","key","getMergedSameEventsByProps","mainProps","secondProps","result","eventName","hasOwnProperty","mergeSameEventsByProps","args","apply"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAI/B,MAAMC,yBAAyB,CAC7BC,OACAC,MAC6C,OAAOD,KAAK,CAACC,IAAI,KAAK;AAErE;;;;;;;CAOC,GACD,OAAO,MAAMC,6BAA6B,CAKxCC,WACAC;IAEA,MAAMC,SAIF,CAAC;IAEL,IAAK,MAAMC,aAAaH,UAAW;QACjC,IACEA,UAAUI,cAAc,CAACD,cACzBF,YAAYG,cAAc,CAACD,cAC3BP,uBAAuBI,WAAWG,cAClCP,uBAAuBK,aAAaE,YACpC;YACAD,MAAM,CAACC,UAAU,GAAG,SAASE,uBAC3B,GAAGC,IAAqD;gBAExDL,WAAW,CAACE,UAAU,CAACI,KAAK,CAAC,IAAI,EAAED;gBACnCN,SAAS,CAACG,UAAU,CAACI,KAAK,CAAC,IAAI,EAAED;YACnC;QACF;IACF;IACA,OAAOJ;AACT,EAAE"}