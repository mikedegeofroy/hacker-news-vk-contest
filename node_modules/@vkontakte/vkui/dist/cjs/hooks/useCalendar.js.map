{"version":3,"sources":["../../../src/hooks/useCalendar.ts"],"sourcesContent":["import * as React from 'react';\nimport { CalendarProps } from '../components/Calendar/Calendar';\nimport { isDayMinMaxRestricted } from '../lib/calendar';\nimport {\n  addMonths,\n  endOfDay,\n  isAfter,\n  isBefore,\n  isSameDay,\n  startOfDay,\n  subMonths,\n} from '../lib/date';\n\nexport interface UseCalendarDependencies\n  extends Pick<\n    CalendarProps,\n    | 'onHeaderChange'\n    | 'onNextMonth'\n    | 'onPrevMonth'\n    | 'minDateTime'\n    | 'maxDateTime'\n    | 'shouldDisableDate'\n    | 'disableFuture'\n    | 'disablePast'\n  > {\n  value?: Array<Date | null> | Date;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onHeaderChange,\n  onNextMonth,\n  onPrevMonth,\n  minDateTime,\n  maxDateTime,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date(),\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(() => {\n    onPrevMonth?.();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  const setNextMonth = React.useCallback(() => {\n    onNextMonth?.();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n\n  const handleSetViewDate = React.useCallback(\n    (value: Date) => {\n      onHeaderChange?.(value);\n      setViewDate(value);\n    },\n    [onHeaderChange],\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay],\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date, withTime?: boolean) => {\n      const now = new Date();\n      if (shouldDisableDate) {\n        return shouldDisableDate(day);\n      }\n      if (disableFuture) {\n        return isAfter(startOfDay(day), now);\n      }\n      if (disablePast) {\n        return isBefore(endOfDay(day), now);\n      }\n      if (minDateTime || maxDateTime) {\n        return isDayMinMaxRestricted(day, { min: minDateTime, max: maxDateTime, withTime });\n      }\n\n      return false;\n    },\n    [disableFuture, disablePast, shouldDisableDate, minDateTime, maxDateTime],\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"],"names":["useCalendar","value","disablePast","disableFuture","shouldDisableDate","onHeaderChange","onNextMonth","onPrevMonth","minDateTime","maxDateTime","Array","viewDate","setViewDate","React","useState","isArray","Date","focusedDay","setFocusedDay","setPrevMonth","useCallback","subMonths","setNextMonth","addMonths","handleSetViewDate","isDayFocused","day","Boolean","isSameDay","isDayDisabled","withTime","now","isAfter","startOfDay","isBefore","endOfDay","isDayMinMaxRestricted","min","max","resetSelectedDay","undefined"],"mappings":";;;;+BA4BgBA;;;eAAAA;;;;iEA5BO;0BAEe;sBAS/B;AAiBA,SAASA,YAAY,EAC1BC,KAAK,EACLC,WAAW,EACXC,aAAa,EACbC,iBAAiB,EACjBC,cAAc,EACdC,WAAW,EACXC,WAAW,EACXC,WAAW,EACXC,WAAW,EACa;QAErBC;IADH,MAAM,CAACC,UAAUC,YAAY,GAAGC,OAAMC,QAAQ,CAC5C,CAACJ,OAAAA,MAAMK,OAAO,CAACd,SAASA,KAAK,CAAC,EAAE,GAAGA,mBAAlCS,kBAAAA,OAA4C,IAAIM;IAEnD,MAAM,CAACC,YAAYC,cAAc,GAAGL,OAAMC,QAAQ;IAElD,MAAMK,eAAeN,OAAMO,WAAW,CAAC;QACrCb,wBAAAA,kCAAAA;QACAK,YAAYS,IAAAA,eAAS,EAACV,UAAU;IAClC,GAAG;QAACA;QAAUJ;KAAY;IAC1B,MAAMe,eAAeT,OAAMO,WAAW,CAAC;QACrCd,wBAAAA,kCAAAA;QACAM,YAAYW,IAAAA,eAAS,EAACZ,UAAU;IAClC,GAAG;QAACA;QAAUL;KAAY;IAE1B,MAAMkB,oBAAoBX,OAAMO,WAAW,CACzC,CAACnB;QACCI,2BAAAA,qCAAAA,eAAiBJ;QACjBW,YAAYX;IACd,GACA;QAACI;KAAe;IAGlB,MAAMoB,eAAeZ,OAAMO,WAAW,CACpC,CAACM,MAAcC,QAAQV,cAAcW,IAAAA,eAAS,EAACF,KAAKT,cACpD;QAACA;KAAW;IAGd,MAAMY,gBAAgBhB,OAAMO,WAAW,CACrC,CAACM,KAAWI;QACV,MAAMC,MAAM,IAAIf;QAChB,IAAIZ,mBAAmB;YACrB,OAAOA,kBAAkBsB;QAC3B;QACA,IAAIvB,eAAe;YACjB,OAAO6B,IAAAA,aAAO,EAACC,IAAAA,gBAAU,EAACP,MAAMK;QAClC;QACA,IAAI7B,aAAa;YACf,OAAOgC,IAAAA,cAAQ,EAACC,IAAAA,cAAQ,EAACT,MAAMK;QACjC;QACA,IAAIvB,eAAeC,aAAa;YAC9B,OAAO2B,IAAAA,+BAAqB,EAACV,KAAK;gBAAEW,KAAK7B;gBAAa8B,KAAK7B;gBAAaqB;YAAS;QACnF;QAEA,OAAO;IACT,GACA;QAAC3B;QAAeD;QAAaE;QAAmBI;QAAaC;KAAY;IAG3E,MAAM8B,mBAAmB1B,OAAMO,WAAW,CAAC;QACzCF,cAAcsB;IAChB,GAAG;QAACtB;KAAc;IAElB,OAAO;QACLP;QACAC,aAAaY;QACbL;QACAG;QACAL;QACAC;QACAO;QACAI;QACAU;IACF;AACF"}