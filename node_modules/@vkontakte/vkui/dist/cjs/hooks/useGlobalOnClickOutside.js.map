{"version":3,"sources":["../../../src/hooks/useGlobalOnClickOutside.ts"],"sourcesContent":["import * as React from 'react';\nimport { isElement, useDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\n/**\n * Завязывается на document.\n *\n * @private\n */\nexport const useGlobalOnClickOutside = <\n  T extends React.RefObject<ElementType> | undefined | null,\n  ElementType extends Element = Element,\n>(\n  callback: (event: MouseEvent) => void,\n  ...refs: T[]\n) => {\n  const { document } = useDOM();\n  useIsomorphicLayoutEffect(() => {\n    const someRefNotNull = refs.some((ref) => ref && ref.current !== null);\n    if (!document || !someRefNotNull) {\n      return;\n    }\n    const handleClick = (event: MouseEvent) => {\n      const targetEl = event.target;\n      const someRefHasTargetEl =\n        isElement(targetEl) &&\n        refs.some((ref) => ref && ref.current && ref.current.contains(targetEl));\n      if (!someRefHasTargetEl) {\n        callback(event);\n      }\n    };\n    document.addEventListener('click', handleClick, {\n      passive: true,\n      capture: true,\n    });\n    return () => {\n      document.removeEventListener('click', handleClick, true);\n    };\n  }, [document, callback, ...refs]);\n};\n"],"names":["useGlobalOnClickOutside","callback","refs","document","useDOM","useIsomorphicLayoutEffect","someRefNotNull","some","ref","current","handleClick","event","targetEl","target","someRefHasTargetEl","isElement","contains","addEventListener","passive","capture","removeEventListener"],"mappings":";;;;+BASaA;;;eAAAA;;;;iEATU;qBACW;2CACQ;AAOnC,MAAMA,0BAA0B,CAIrCC,UACA,GAAGC;IAEH,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,WAAM;IAC3BC,IAAAA,oDAAyB,EAAC;QACxB,MAAMC,iBAAiBJ,KAAKK,IAAI,CAAC,CAACC,MAAQA,OAAOA,IAAIC,OAAO,KAAK;QACjE,IAAI,CAACN,YAAY,CAACG,gBAAgB;YAChC;QACF;QACA,MAAMI,cAAc,CAACC;YACnB,MAAMC,WAAWD,MAAME,MAAM;YAC7B,MAAMC,qBACJC,IAAAA,cAAS,EAACH,aACVV,KAAKK,IAAI,CAAC,CAACC,MAAQA,OAAOA,IAAIC,OAAO,IAAID,IAAIC,OAAO,CAACO,QAAQ,CAACJ;YAChE,IAAI,CAACE,oBAAoB;gBACvBb,SAASU;YACX;QACF;QACAR,SAASc,gBAAgB,CAAC,SAASP,aAAa;YAC9CQ,SAAS;YACTC,SAAS;QACX;QACA,OAAO;YACLhB,SAASiB,mBAAmB,CAAC,SAASV,aAAa;QACrD;IACF,GAAG;QAACP;QAAUF;WAAaC;KAAK;AAClC"}