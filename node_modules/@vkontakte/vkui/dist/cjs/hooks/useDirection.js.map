{"version":3,"sources":["../../../src/hooks/useDirection.ts"],"sourcesContent":["import * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\ntype Direction = 'ltr' | 'rtl';\ntype WritingMode = 'horizontal-tb' | 'vertical-rl' | 'vertical-lr';\n\n/**\n * Определяет направление текста элемента.\n *\n * ## Ограничения\n *\n * - Не следит за изменением направлением.\n * - Определяется только на второй рендер.\n *\n * ## Пример\n *\n * ```jsx\n * import { strict as assert } from 'node:assert';\n *\n * const Component = () => {\n *   const [ref, direction, writingMode] = useDirection();\n *\n *   React.useEffect(()=>{\n *     if (!direction || !writingMode) {\n *       return\n *     }\n *\n *     assert.equal(direction, 'ltr')\n *     assert.equal(writingMode, 'vertical-rl')\n *   }, [direction, writingMode])\n *\n *   return <div ref={ref} style={{writingMode: 'vertical-rl'}}>我家没有电脑。</div>\n * }\n * ```\n */\nexport function useDirection<T extends HTMLElement>(): [\n  React.RefObject<T>,\n  Direction | undefined,\n  WritingMode | undefined,\n] {\n  const ref = React.useRef<T>(null);\n\n  const [direction, setDirection] = React.useState<Direction | undefined>(undefined);\n  const [writingMode, setWritingMode] = React.useState<WritingMode | undefined>(undefined);\n\n  const { window } = useDOM();\n\n  const update = () => {\n    if (!window || !ref.current) {\n      return;\n    }\n\n    const styleDeclaration = window.getComputedStyle(ref.current);\n\n    setDirection(styleDeclaration.direction as Direction);\n    setWritingMode(styleDeclaration.writingMode as WritingMode);\n  };\n\n  useIsomorphicLayoutEffect(update, [window]);\n\n  return [ref, direction, writingMode];\n}\n"],"names":["useDirection","ref","React","useRef","direction","setDirection","useState","undefined","writingMode","setWritingMode","window","useDOM","update","current","styleDeclaration","getComputedStyle","useIsomorphicLayoutEffect"],"mappings":";;;;+BAoCgBA;;;eAAAA;;;;iEApCO;qBACA;2CACmB;AAkCnC,SAASA;IAKd,MAAMC,MAAMC,OAAMC,MAAM,CAAI;IAE5B,MAAM,CAACC,WAAWC,aAAa,GAAGH,OAAMI,QAAQ,CAAwBC;IACxE,MAAM,CAACC,aAAaC,eAAe,GAAGP,OAAMI,QAAQ,CAA0BC;IAE9E,MAAM,EAAEG,MAAM,EAAE,GAAGC,IAAAA,WAAM;IAEzB,MAAMC,SAAS;QACb,IAAI,CAACF,UAAU,CAACT,IAAIY,OAAO,EAAE;YAC3B;QACF;QAEA,MAAMC,mBAAmBJ,OAAOK,gBAAgB,CAACd,IAAIY,OAAO;QAE5DR,aAAaS,iBAAiBV,SAAS;QACvCK,eAAeK,iBAAiBN,WAAW;IAC7C;IAEAQ,IAAAA,oDAAyB,EAACJ,QAAQ;QAACF;KAAO;IAE1C,OAAO;QAACT;QAAKG;QAAWI;KAAY;AACtC"}