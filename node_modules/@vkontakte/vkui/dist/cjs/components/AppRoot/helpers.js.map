{"version":3,"sources":["../../../../src/components/AppRoot/helpers.ts"],"sourcesContent":["import type { SizeTypeValues } from '../../lib/adaptivity';\nimport { isRefObject } from '../../lib/isRefObject';\nimport type { AppRootLayout, AppRootMode, SafeAreaInsets } from './types';\n\ntype ContainerClassNamesProps = {\n  mode: AppRootMode;\n  layout?: AppRootLayout;\n  tokensClassName: string;\n  sizeX: SizeTypeValues | 'none';\n  sizeY: SizeTypeValues | 'none';\n};\n\nexport function getClassNamesByMode({\n  mode,\n  layout,\n  tokensClassName,\n  sizeX,\n  sizeY,\n}: ContainerClassNamesProps): [string[], string[]] {\n  const baseClassNames: string[] = ['vkui__root'];\n  const stylesClassNames: string[] = [tokensClassName];\n\n  if (mode === 'full' || mode === 'embedded') {\n    if (layout) {\n      const vkuiLayoutClassNames = { card: 'vkui--layout-card', plain: 'vkui--layout-plain' };\n      stylesClassNames.push(vkuiLayoutClassNames[layout]);\n    }\n\n    if (sizeX !== 'compact') {\n      const vkuiSizeXClassNames = { none: 'vkui--sizeX-none', regular: 'vkui--sizeX-regular' };\n      stylesClassNames.push(vkuiSizeXClassNames[sizeX]);\n    }\n\n    if (sizeY !== 'regular') {\n      const vkuiSizeYClassNames = { none: 'vkui--sizeY-none', compact: 'vkui--sizeY-compact' };\n      stylesClassNames.push(vkuiSizeYClassNames[sizeY]);\n    }\n\n    if (mode === 'embedded') {\n      baseClassNames.push('vkui__root--embedded');\n    }\n  }\n\n  return [baseClassNames, stylesClassNames];\n}\n\nexport const getParentElement = (el: HTMLElement | null) => (el ? el.parentElement : null);\n\nexport const extractPortalRootByProp = (\n  portalRootProp: HTMLElement | React.RefObject<HTMLElement>,\n) => (isRefObject(portalRootProp) ? portalRootProp.current : portalRootProp);\n\nexport const CUSTOM_PROPERTY_INSET_PREFIX = `--vkui_internal--safe_area_inset_`;\n\nexport const setSafeAreaInsets = (\n  safeAreaInsets: SafeAreaInsets | undefined,\n  rootContainer: HTMLElement,\n  portalContainer?: HTMLElement,\n) => {\n  if (!safeAreaInsets) {\n    return () => void 0;\n  }\n\n  for (const key in safeAreaInsets) {\n    if (safeAreaInsets.hasOwnProperty(key) && typeof safeAreaInsets[key] === 'number') {\n      const propertyKey = `${CUSTOM_PROPERTY_INSET_PREFIX}${key}`;\n      const propertyValue = safeAreaInsets[key];\n      rootContainer.style.setProperty(propertyKey, `${propertyValue}px`);\n      if (portalContainer) {\n        portalContainer.style.setProperty(propertyKey, `${propertyValue}px`);\n      }\n    }\n  }\n\n  return function unset() {\n    for (const key in safeAreaInsets) {\n      if (safeAreaInsets.hasOwnProperty(key)) {\n        const propertyKey = `${CUSTOM_PROPERTY_INSET_PREFIX}${key}`;\n        rootContainer.style.removeProperty(propertyKey);\n        if (portalContainer) {\n          portalContainer.style.removeProperty(propertyKey);\n        }\n      }\n    }\n  };\n};\n"],"names":["CUSTOM_PROPERTY_INSET_PREFIX","extractPortalRootByProp","getClassNamesByMode","getParentElement","setSafeAreaInsets","mode","layout","tokensClassName","sizeX","sizeY","baseClassNames","stylesClassNames","vkuiLayoutClassNames","card","plain","push","vkuiSizeXClassNames","none","regular","vkuiSizeYClassNames","compact","el","parentElement","portalRootProp","isRefObject","current","safeAreaInsets","rootContainer","portalContainer","key","hasOwnProperty","propertyKey","propertyValue","style","setProperty","unset","removeProperty"],"mappings":";;;;;;;;;;;IAoDaA,4BAA4B;eAA5BA;;IAJAC,uBAAuB;eAAvBA;;IApCGC,mBAAmB;eAAnBA;;IAkCHC,gBAAgB;eAAhBA;;IAQAC,iBAAiB;eAAjBA;;;6BArDe;AAWrB,SAASF,oBAAoB,EAClCG,IAAI,EACJC,MAAM,EACNC,eAAe,EACfC,KAAK,EACLC,KAAK,EACoB;IACzB,MAAMC,iBAA2B;QAAC;KAAa;IAC/C,MAAMC,mBAA6B;QAACJ;KAAgB;IAEpD,IAAIF,SAAS,UAAUA,SAAS,YAAY;QAC1C,IAAIC,QAAQ;YACV,MAAMM,uBAAuB;gBAAEC,MAAM;gBAAqBC,OAAO;YAAqB;YACtFH,iBAAiBI,IAAI,CAACH,oBAAoB,CAACN,OAAO;QACpD;QAEA,IAAIE,UAAU,WAAW;YACvB,MAAMQ,sBAAsB;gBAAEC,MAAM;gBAAoBC,SAAS;YAAsB;YACvFP,iBAAiBI,IAAI,CAACC,mBAAmB,CAACR,MAAM;QAClD;QAEA,IAAIC,UAAU,WAAW;YACvB,MAAMU,sBAAsB;gBAAEF,MAAM;gBAAoBG,SAAS;YAAsB;YACvFT,iBAAiBI,IAAI,CAACI,mBAAmB,CAACV,MAAM;QAClD;QAEA,IAAIJ,SAAS,YAAY;YACvBK,eAAeK,IAAI,CAAC;QACtB;IACF;IAEA,OAAO;QAACL;QAAgBC;KAAiB;AAC3C;AAEO,MAAMR,mBAAmB,CAACkB,KAA4BA,KAAKA,GAAGC,aAAa,GAAG;AAE9E,MAAMrB,0BAA0B,CACrCsB,iBACIC,IAAAA,wBAAW,EAACD,kBAAkBA,eAAeE,OAAO,GAAGF;AAEtD,MAAMvB,+BAA+B,CAAC,iCAAiC,CAAC;AAExE,MAAMI,oBAAoB,CAC/BsB,gBACAC,eACAC;IAEA,IAAI,CAACF,gBAAgB;QACnB,OAAO,IAAM,KAAK;IACpB;IAEA,IAAK,MAAMG,OAAOH,eAAgB;QAChC,IAAIA,eAAeI,cAAc,CAACD,QAAQ,OAAOH,cAAc,CAACG,IAAI,KAAK,UAAU;YACjF,MAAME,cAAc,CAAC,EAAE/B,6BAA6B,EAAE6B,IAAI,CAAC;YAC3D,MAAMG,gBAAgBN,cAAc,CAACG,IAAI;YACzCF,cAAcM,KAAK,CAACC,WAAW,CAACH,aAAa,CAAC,EAAEC,cAAc,EAAE,CAAC;YACjE,IAAIJ,iBAAiB;gBACnBA,gBAAgBK,KAAK,CAACC,WAAW,CAACH,aAAa,CAAC,EAAEC,cAAc,EAAE,CAAC;YACrE;QACF;IACF;IAEA,OAAO,SAASG;QACd,IAAK,MAAMN,OAAOH,eAAgB;YAChC,IAAIA,eAAeI,cAAc,CAACD,MAAM;gBACtC,MAAME,cAAc,CAAC,EAAE/B,6BAA6B,EAAE6B,IAAI,CAAC;gBAC3DF,cAAcM,KAAK,CAACG,cAAc,CAACL;gBACnC,IAAIH,iBAAiB;oBACnBA,gBAAgBK,KAAK,CAACG,cAAc,CAACL;gBACvC;YACF;QACF;IACF;AACF"}