{"version":3,"sources":["../../../../../src/components/ChipsInputBase/Chip/Chip.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon16Cancel } from '@vkontakte/icons';\nimport { classNames, hasReactNode, noop } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../../hooks/useAdaptivity';\nimport { useFocusVisible } from '../../../hooks/useFocusVisible';\nimport { useFocusVisibleClassName } from '../../../hooks/useFocusVisibleClassName';\nimport { RootComponent } from '../../RootComponent/RootComponent';\nimport { Footnote } from '../../Typography/Footnote/Footnote';\nimport { VisuallyHidden } from '../../VisuallyHidden/VisuallyHidden';\nimport type { ChipProps } from '../types';\nimport styles from './Chip.module.css';\n\nconst sizeYClassNames = {\n  none: styles['Chip--sizeY-none'],\n  compact: styles['Chip--sizeY-compact'],\n} as const;\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Chip\n */\nexport const Chip = ({\n  Component = 'span',\n  value = '',\n  removable = true,\n  onRemove = noop,\n  removeLabel = 'Удалить',\n  before,\n  after,\n  disabled,\n  readOnly,\n  children,\n  className,\n  onFocus: onFocusProp,\n  onBlur: onBlurProp,\n  ...restProps\n}: ChipProps) => {\n  const { sizeY = 'none' } = useAdaptivity();\n  const { focusVisible, onFocus, onBlur } = useFocusVisible();\n  const focusVisibleClassName = useFocusVisibleClassName({ focusVisible });\n\n  const handleFocus = (event: React.FocusEvent<HTMLInputElement>) => {\n    if (onFocusProp) {\n      onFocusProp(event);\n    }\n    onFocus(event);\n  };\n\n  const handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n    if (onBlurProp) {\n      onBlurProp(event);\n    }\n    onBlur(event);\n  };\n\n  const onRemoveWrapper = React.useCallback(\n    (event: React.MouseEvent) => {\n      onRemove(event, value);\n    },\n    [onRemove, value],\n  );\n\n  return (\n    <RootComponent\n      {...restProps}\n      Component={Component}\n      className={classNames(\n        styles['Chip'],\n        sizeY !== 'regular' && sizeYClassNames[sizeY],\n        focusVisibleClassName,\n        className,\n      )}\n      aria-readonly={readOnly}\n      aria-disabled={disabled}\n      onFocus={disabled ? undefined : handleFocus}\n      onBlur={disabled ? undefined : handleBlur}\n    >\n      <div className={styles['Chip__in']}>\n        {hasReactNode(before) && <div className={styles['Chip__before']}>{before}</div>}\n        <Footnote className={styles['Chip__content']}>{children}</Footnote>\n        {hasReactNode(after) && <div className={styles['Chip__after']}>{after}</div>}\n      </div>\n      {!readOnly && removable && (\n        <div className={styles['Chip__removable']}>\n          <button\n            tabIndex={-1} // [reason]: чтобы можно было выставлять состояние фокуса только программно через `*.focus()`\n            disabled={disabled}\n            className={styles['Chip__remove']}\n            onClick={disabled ? undefined : onRemoveWrapper}\n          >\n            <VisuallyHidden>\n              &nbsp; {removeLabel} {children}\n            </VisuallyHidden>\n            <Icon16Cancel />\n          </button>\n        </div>\n      )}\n    </RootComponent>\n  );\n};\n"],"names":["Chip","sizeYClassNames","none","compact","Component","value","removable","onRemove","noop","removeLabel","before","after","disabled","readOnly","children","className","onFocus","onFocusProp","onBlur","onBlurProp","restProps","sizeY","useAdaptivity","focusVisible","useFocusVisible","focusVisibleClassName","useFocusVisibleClassName","handleFocus","event","handleBlur","onRemoveWrapper","React","useCallback","RootComponent","classNames","aria-readonly","aria-disabled","undefined","div","hasReactNode","Footnote","button","tabIndex","onClick","VisuallyHidden","Icon16Cancel"],"mappings":";;;;+BAoBaA;;;eAAAA;;;;;;;iEApBU;uBACM;sBACkB;+BACjB;iCACE;0CACS;+BACX;0BACL;gCACM;AAI/B,MAAMC,kBAAkB;IACtBC,IAAI;IACJC,OAAO;AACT;AAKO,MAAMH,OAAO;QAAC,EACnBI,YAAY,MAAM,EAClBC,QAAQ,EAAE,EACVC,YAAY,IAAI,EAChBC,WAAWC,UAAI,EACfC,cAAc,SAAS,EACvBC,MAAM,EACNC,KAAK,EACLC,QAAQ,EACRC,QAAQ,EACRC,QAAQ,EACRC,SAAS,EACTC,SAASC,WAAW,EACpBC,QAAQC,UAAU,EAER,WADPC;QAbHhB;QACAC;QACAC;QACAC;QACAE;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAE;;IAGA,MAAM,EAAEG,QAAQ,MAAM,EAAE,GAAGC,IAAAA,4BAAa;IACxC,MAAM,EAAEC,YAAY,EAAEP,OAAO,EAAEE,MAAM,EAAE,GAAGM,IAAAA,gCAAe;IACzD,MAAMC,wBAAwBC,IAAAA,kDAAwB,EAAC;QAAEH;IAAa;IAEtE,MAAMI,cAAc,CAACC;QACnB,IAAIX,aAAa;YACfA,YAAYW;QACd;QACAZ,QAAQY;IACV;IAEA,MAAMC,aAAa,CAACD;QAClB,IAAIT,YAAY;YACdA,WAAWS;QACb;QACAV,OAAOU;IACT;IAEA,MAAME,kBAAkBC,OAAMC,WAAW,CACvC,CAACJ;QACCrB,SAASqB,OAAOvB;IAClB,GACA;QAACE;QAAUF;KAAM;IAGnB,qBACE,qBAAC4B,4BAAa,8CACRb;QACJhB,WAAWA;QACXW,WAAWmB,IAAAA,gBAAU,cAEnBb,UAAU,aAAapB,eAAe,CAACoB,MAAM,EAC7CI,uBACAV;QAEFoB,iBAAetB;QACfuB,iBAAexB;QACfI,SAASJ,WAAWyB,YAAYV;QAChCT,QAAQN,WAAWyB,YAAYR;sBAE/B,qBAACS;QAAIvB,SAAS;OACXwB,IAAAA,kBAAY,EAAC7B,yBAAW,qBAAC4B;QAAIvB,SAAS;OAA2BL,uBAClE,qBAAC8B,kBAAQ;QAACzB,SAAS;OAA4BD,WAC9CyB,IAAAA,kBAAY,EAAC5B,wBAAU,qBAAC2B;QAAIvB,SAAS;OAA0BJ,SAEjE,CAACE,YAAYP,2BACZ,qBAACgC;QAAIvB,SAAS;qBACZ,qBAAC0B;QACCC,UAAU,CAAC;QACX9B,UAAUA;QACVG,SAAS;QACT4B,SAAS/B,WAAWyB,YAAYP;qBAEhC,qBAACc,8BAAc,QAAC,MACNnC,aAAY,KAAEK,yBAExB,qBAAC+B,mBAAY;AAMzB"}