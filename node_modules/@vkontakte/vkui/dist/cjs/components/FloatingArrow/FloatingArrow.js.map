{"version":3,"sources":["../../../../src/components/FloatingArrow/FloatingArrow.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport type { Placement } from '../../lib/floating';\nimport type { HasDataAttribute, HTMLAttributesWithRootRef } from '../../types';\nimport { DefaultIcon } from './DefaultIcon';\nimport styles from './FloatingArrow.module.css';\n\nexport type Coords = {\n  x?: number;\n  y?: number;\n};\n\nconst placementClassNames = {\n  right: styles['FloatingArrow--placement-right'],\n  bottom: styles['FloatingArrow--placement-bottom'],\n  left: styles['FloatingArrow--placement-left'],\n};\n\nexport interface FloatingArrowProps\n  extends HTMLAttributesWithRootRef<HTMLDivElement>,\n    HasDataAttribute {\n  /**\n   * Сдвиг стрелки относительно текущих координат.\n   */\n  offset?: number;\n  /**\n   * Включает абсолютное смещение по `offset`.\n   */\n  isStaticOffset?: boolean;\n  coords?: Coords;\n  placement?: Placement;\n  iconStyle?: React.CSSProperties;\n  iconClassName?: string;\n  Icon?: React.ComponentType<React.SVGAttributes<SVGSVGElement>>;\n}\n\n/**\n * @private\n */\nexport const FloatingArrow = ({\n  offset,\n  isStaticOffset,\n  coords,\n  iconStyle,\n  iconClassName,\n  placement = 'bottom',\n  getRootRef,\n  Icon = DefaultIcon,\n  ...restProps\n}: FloatingArrowProps) => {\n  const [arrowPlacement, arrowStyles] = getArrowPositionData(\n    placement,\n    coords,\n    offset,\n    isStaticOffset,\n  );\n\n  return (\n    <div\n      ref={getRootRef}\n      style={arrowStyles}\n      className={classNames(\n        styles['FloatingArrow'],\n        arrowPlacement && placementClassNames[arrowPlacement],\n      )}\n      {...restProps}\n    >\n      <Icon className={classNames(styles['FloatingArrow__in'], iconClassName)} style={iconStyle} />\n    </div>\n  );\n};\n\nfunction getArrowPositionData(\n  placement: Placement,\n  coords: Coords = { x: 0, y: 0 },\n  offset = 0,\n  isStaticOffset = false,\n): [undefined | 'right' | 'bottom' | 'left', React.CSSProperties] {\n  const withOffset = (isVerticalPlacement: boolean) => {\n    const parsedCoords = { x: coords.x || 0, y: coords.y || 0 };\n\n    if (isVerticalPlacement) {\n      return isStaticOffset ? offset : parsedCoords.y + offset;\n    } else {\n      return isStaticOffset ? offset : parsedCoords.x + offset;\n    }\n  };\n\n  if (placement.startsWith('top')) {\n    return [\n      'bottom',\n      {\n        top: '100%',\n        left: withOffset(false),\n      },\n    ];\n  } else if (placement.startsWith('right')) {\n    return [\n      'left',\n      {\n        top: withOffset(true),\n        left: 0,\n      },\n    ];\n  } else if (placement.startsWith('bottom')) {\n    return [\n      undefined,\n      {\n        bottom: '100%',\n        left: withOffset(false),\n      },\n    ];\n  } else {\n    return [\n      'right',\n      {\n        top: withOffset(true),\n        right: 0,\n      },\n    ];\n  }\n}\n"],"names":["FloatingArrow","placementClassNames","right","bottom","left","offset","isStaticOffset","coords","iconStyle","iconClassName","placement","getRootRef","Icon","DefaultIcon","restProps","arrowPlacement","arrowStyles","getArrowPositionData","div","ref","style","className","classNames","x","y","withOffset","isVerticalPlacement","parsedCoords","startsWith","top","undefined"],"mappings":";;;;+BAuCaA;;;eAAAA;;;;;;iEAvCU;sBACI;6BAGC;AAQ5B,MAAMC,sBAAsB;IAC1BC,KAAK;IACLC,MAAM;IACNC,IAAI;AACN;AAuBO,MAAMJ,gBAAgB;QAAC,EAC5BK,MAAM,EACNC,cAAc,EACdC,MAAM,EACNC,SAAS,EACTC,aAAa,EACbC,YAAY,QAAQ,EACpBC,UAAU,EACVC,OAAOC,wBAAW,EAEC,WADhBC;QARHT;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;;IAGA,MAAM,CAACG,gBAAgBC,YAAY,GAAGC,qBACpCP,WACAH,QACAF,QACAC;IAGF,qBACE,qBAACY;QACCC,KAAKR;QACLS,OAAOJ;QACPK,WAAWC,IAAAA,gBAAU,uBAEnBP,kBAAkBd,mBAAmB,CAACc,eAAe;OAEnDD,0BAEJ,qBAACF;QAAKS,WAAWC,IAAAA,gBAAU,2BAA8Bb;QAAgBW,OAAOZ;;AAGtF;AAEA,SAASS,qBACPP,SAAoB,EACpBH,SAAiB;IAAEgB,GAAG;IAAGC,GAAG;AAAE,CAAC,EAC/BnB,SAAS,CAAC,EACVC,iBAAiB,KAAK;IAEtB,MAAMmB,aAAa,CAACC;QAClB,MAAMC,eAAe;YAAEJ,GAAGhB,OAAOgB,CAAC,IAAI;YAAGC,GAAGjB,OAAOiB,CAAC,IAAI;QAAE;QAE1D,IAAIE,qBAAqB;YACvB,OAAOpB,iBAAiBD,SAASsB,aAAaH,CAAC,GAAGnB;QACpD,OAAO;YACL,OAAOC,iBAAiBD,SAASsB,aAAaJ,CAAC,GAAGlB;QACpD;IACF;IAEA,IAAIK,UAAUkB,UAAU,CAAC,QAAQ;QAC/B,OAAO;YACL;YACA;gBACEC,KAAK;gBACLzB,MAAMqB,WAAW;YACnB;SACD;IACH,OAAO,IAAIf,UAAUkB,UAAU,CAAC,UAAU;QACxC,OAAO;YACL;YACA;gBACEC,KAAKJ,WAAW;gBAChBrB,MAAM;YACR;SACD;IACH,OAAO,IAAIM,UAAUkB,UAAU,CAAC,WAAW;QACzC,OAAO;YACLE;YACA;gBACE3B,QAAQ;gBACRC,MAAMqB,WAAW;YACnB;SACD;IACH,OAAO;QACL,OAAO;YACL;YACA;gBACEI,KAAKJ,WAAW;gBAChBvB,OAAO;YACT;SACD;IACH;AACF"}