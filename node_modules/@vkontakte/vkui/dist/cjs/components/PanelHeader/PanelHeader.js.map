{"version":3,"sources":["../../../../src/components/PanelHeader/PanelHeader.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useAdaptivityConditionalRender } from '../../hooks/useAdaptivityConditionalRender';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { HasComponent, HasDataAttribute, HasRef, HTMLAttributesWithRootRef } from '../../types';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { ModalRootContext } from '../ModalRoot/ModalRootContext';\nimport { OnboardingTooltipContainer } from '../OnboardingTooltip/OnboardingTooltipContainer';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Separator } from '../Separator/Separator';\nimport { Spacing } from '../Spacing/Spacing';\nimport { Text } from '../Typography/Text/Text';\nimport styles from './PanelHeader.module.css';\n\nconst platformClassNames = {\n  ios: styles['PanelHeader--ios'],\n  android: styles['PanelHeader--android'],\n  vkcom: classNames(styles['PanelHeader--vkcom'], 'vkuiInternalPanelHeader--vkcom'),\n};\n\nconst sizeXClassNames = {\n  none: styles['PanelHeader--sizeX-none'],\n  regular: styles['PanelHeader--sizeX-regular'],\n};\n\nconst sizeYClassNames = {\n  none: styles['PanelHeader--sizeY-none'],\n  compact: styles['PanelHeader--sizeY-compact'],\n};\n\nexport interface PanelHeaderProps\n  extends HTMLAttributesWithRootRef<HTMLDivElement>,\n    HasRef<HTMLDivElement> {\n  before?: React.ReactNode;\n  /**\n   * Добавляет элемент справа.\n   *\n   * При передаче нескольких элементов, расставляет отступы между ними.\n   */\n  after?: React.ReactNode;\n  /**\n   * Тип разделителя под шапкой.\n   *\n   * - `\"none\"` означает, что разделитель не нужен\n   * - `\"separator\"` включает сепаратор при условии, что это:\n   *      - либо платформа `vkcom`\n   *      - либо платформа `android`/`ios` при `<AdaptivityProvider sizeX=\"compact\" />`\n   * - `\"spacing\"` включает отступ, если это платформа `android`/`ios` при `<AdaptivityProvider sizeX=\"regular\" />`\n   * - `\"auto\"` автоматически подбирает либо `\"separator\"`, либо `\"spacing\"` по их условиям\n   */\n  delimiter?: 'auto' | 'none' | 'separator' | 'spacing';\n  transparent?: boolean;\n  shadow?: boolean;\n  /**\n   * Высота шапки будет игнорироваться контентом панели\n   */\n  float?: boolean;\n  /**\n   * Если `false`, то шапка будет в потоке. По умолчанию `true`, но если платформа vkcom, то по умолчанию `false`.\n   */\n  fixed?: boolean;\n  /**\n   * По умолчанию как `Component` используется `span`.\n   */\n  typographyProps?: HasComponent & React.HTMLAttributes<HTMLElement> & HasDataAttribute;\n}\n\ninterface PanelHeaderInProps {\n  before?: PanelHeaderProps['before'];\n  after?: PanelHeaderProps['after'];\n  children?: PanelHeaderProps['children'];\n  typographyProps?: PanelHeaderProps['typographyProps'];\n}\n\nconst PanelHeaderIn = ({ before, after, children, typographyProps = {} }: PanelHeaderInProps) => {\n  const { Component = 'span', ...restProps } = typographyProps;\n  const { hasCustomPanelHeaderAfter, customPanelHeaderAfterMinWidth } = useConfigProvider();\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const platform = usePlatform();\n\n  const afterSlotProps =\n    !hasCustomPanelHeaderAfter || isInsideModal\n      ? {\n          children: after,\n        }\n      : {\n          style: { minWidth: customPanelHeaderAfterMinWidth },\n        };\n  const typographyNode: React.ReactNode =\n    platform === 'vkcom' ? (\n      <Text weight=\"2\" Component={Component} {...restProps}>\n        {children}\n      </Text>\n    ) : (\n      <Component className={styles['PanelHeader__content-in']} {...restProps}>\n        {children}\n      </Component>\n    );\n\n  return (\n    <OnboardingTooltipContainer fixed className={styles['PanelHeader__in']}>\n      <div className={classNames(styles['PanelHeader__before'], 'vkuiInternalPanelHeader__before')}>\n        {before}\n      </div>\n      <div className={styles['PanelHeader__content']}>{typographyNode}</div>\n      <div\n        className={classNames(styles['PanelHeader__after'], 'vkuiInternalPanelHeader__after')}\n        {...afterSlotProps}\n      />\n    </OnboardingTooltipContainer>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeader\n */\nexport const PanelHeader = ({\n  before,\n  children,\n  after,\n  float = false,\n  transparent = false,\n  delimiter = 'auto',\n  shadow,\n  getRef,\n  getRootRef,\n  fixed,\n  typographyProps,\n  ...restProps\n}: PanelHeaderProps) => {\n  const platform = usePlatform();\n  const { sizeX = 'none', sizeY = 'none' } = useAdaptivity();\n  const { sizeX: adaptiveSizeX } = useAdaptivityConditionalRender();\n  const isVKCOM = platform === 'vkcom';\n  const isFixed = fixed !== undefined ? fixed : !isVKCOM;\n  const separatorVisible = delimiter === 'auto' || delimiter === 'separator';\n  const staticSeparatorVisible = !float && separatorVisible;\n  const staticSpacingVisible = !float && (delimiter === 'auto' || delimiter === 'spacing');\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['PanelHeader'],\n        'vkuiInternalPanelHeader',\n        platformClassNames.hasOwnProperty(platform)\n          ? platformClassNames[platform]\n          : platformClassNames.android,\n        transparent && styles['PanelHeader--trnsp'],\n        shadow && styles['PanelHeader--shadow'],\n        !float && classNames(styles['PanelHeader--static'], 'vkuiInternalPanelHeader--static'),\n        staticSeparatorVisible &&\n          classNames(styles['PanelHeader--sep'], 'vkuiInternalPanelHeader--sep'),\n        !before &&\n          classNames(styles['PanelHeader--no-before'], 'vkuiInternalPanelHeader--no-before'),\n        !after && styles['PanelHeader--no-after'],\n        isFixed && styles['PanelHeader--fixed'],\n        sizeX !== 'compact' && sizeXClassNames[sizeX],\n        sizeY !== 'regular' && sizeYClassNames[sizeY],\n      )}\n      getRootRef={isFixed ? getRootRef : getRef}\n    >\n      {isFixed ? (\n        <FixedLayout\n          className={classNames(styles['PanelHeader__fixed'], 'vkuiInternalPanelHeader__fixed')}\n          vertical=\"top\"\n          getRootRef={getRef}\n        >\n          <PanelHeaderIn before={before} after={after} typographyProps={typographyProps}>\n            {children}\n          </PanelHeaderIn>\n        </FixedLayout>\n      ) : (\n        <PanelHeaderIn before={before} after={after} typographyProps={typographyProps}>\n          {children}\n        </PanelHeaderIn>\n      )}\n      {!isVKCOM && (\n        <>\n          {staticSeparatorVisible && adaptiveSizeX.compact && (\n            <Separator className={adaptiveSizeX.compact.className} />\n          )}\n          {staticSpacingVisible && adaptiveSizeX.regular && (\n            <Spacing className={adaptiveSizeX.regular.className} size={16} />\n          )}\n        </>\n      )}\n      {separatorVisible && isVKCOM && (\n        <Separator className={styles['PanelHeader__separator']} wide />\n      )}\n    </RootComponent>\n  );\n};\n"],"names":["PanelHeader","platformClassNames","ios","android","vkcom","classNames","sizeXClassNames","none","regular","sizeYClassNames","compact","PanelHeaderIn","before","after","children","typographyProps","Component","restProps","hasCustomPanelHeaderAfter","customPanelHeaderAfterMinWidth","useConfigProvider","isInsideModal","React","useContext","ModalRootContext","platform","usePlatform","afterSlotProps","style","minWidth","typographyNode","Text","weight","className","OnboardingTooltipContainer","fixed","div","float","transparent","delimiter","shadow","getRef","getRootRef","sizeX","sizeY","useAdaptivity","adaptiveSizeX","useAdaptivityConditionalRender","isVKCOM","isFixed","undefined","separatorVisible","staticSeparatorVisible","staticSpacingVisible","RootComponent","baseClassName","hasOwnProperty","FixedLayout","vertical","Separator","Spacing","size","wide"],"mappings":"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"}