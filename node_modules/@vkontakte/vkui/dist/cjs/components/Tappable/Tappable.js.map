{"version":3,"sources":["../../../../src/components/Tappable/Tappable.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { SizeType } from '../../lib/adaptivity';\nimport { mergeCalls } from '../../lib/mergeCalls';\nimport { checkClickable, Clickable, ClickableProps } from '../Clickable/Clickable';\nimport { Ripple, useMaybeNeedRipple, useRipple } from './Ripple';\nimport { activeClass, DEFAULT_STATE_MODE, hoverClass, StateProps } from './state';\nimport styles from './Tappable.module.css';\n\nconst sizeXClassNames = {\n  none: styles['Tappable--sizeX-none'],\n  compact: styles['Tappable--sizeX-compact'],\n};\n\nfunction hasPointerClassName(hasPointer: boolean | undefined) {\n  switch (hasPointer) {\n    case undefined:\n      return styles['Tappable--hasPointer-none'];\n    case false:\n      return styles['Tappable--hasPointer-false'];\n  }\n\n  return undefined;\n}\n\nexport interface TappableProps extends ClickableProps, StateProps {\n  /**\n   * Задает border-radius элементу\n   * В режиме `auto` на маленьких экранах `border-radius: 0`, иначе определяется токеном `--vkui--size_border_radius--regular`\n   */\n  borderRadiusMode?: 'auto' | 'inherit';\n}\n\nexport const Tappable = ({\n  baseClassName,\n  borderRadiusMode = 'auto',\n  children,\n  hoverMode = DEFAULT_STATE_MODE,\n  activeMode = DEFAULT_STATE_MODE,\n  onPointerDown,\n  onPointerCancel,\n  ...restProps\n}: TappableProps) => {\n  const isClickable = checkClickable(restProps);\n\n  const { sizeX = 'none', hasPointer } = useAdaptivity();\n\n  const needRipple = useMaybeNeedRipple(activeMode, hasPointer);\n  const { clicks, ...rippleEvents } = useRipple(needRipple, hasPointer);\n\n  const handlers = mergeCalls(rippleEvents, {\n    onPointerDown,\n    onPointerCancel,\n  });\n\n  const typeProps = restProps.Component === 'button' ? { type: 'button' } : {};\n\n  return (\n    <Clickable\n      baseClassName={classNames(\n        baseClassName,\n        styles['Tappable'],\n        sizeX !== SizeType.REGULAR && sizeXClassNames[sizeX],\n        borderRadiusMode === 'inherit' && styles['Tappable--borderRadiusInherit'],\n        hasPointerClassName(hasPointer),\n      )}\n      hoverClassName={hoverClass(hoverMode)}\n      activeClassName={activeClass(activeMode)}\n      {...typeProps}\n      {...handlers}\n      {...restProps}\n    >\n      {children}\n      {isClickable && (hoverMode === 'background' || activeMode === 'background') && (\n        <Ripple needRipple={needRipple} clicks={clicks} />\n      )}\n    </Clickable>\n  );\n};\n"],"names":["Tappable","sizeXClassNames","none","compact","hasPointerClassName","hasPointer","undefined","baseClassName","borderRadiusMode","children","hoverMode","DEFAULT_STATE_MODE","activeMode","onPointerDown","onPointerCancel","restProps","isClickable","checkClickable","sizeX","useAdaptivity","needRipple","useMaybeNeedRipple","useRipple","clicks","rippleEvents","handlers","mergeCalls","typeProps","Component","type","Clickable","classNames","SizeType","REGULAR","hoverClassName","hoverClass","activeClassName","activeClass","Ripple"],"mappings":";;;;+BAkCaA;;;eAAAA;;;;;;iEAlCU;sBACI;+BACG;4BACL;4BACE;2BAC+B;wBACJ;uBACkB;AAGxE,MAAMC,kBAAkB;IACtBC,IAAI;IACJC,OAAO;AACT;AAEA,SAASC,oBAAoBC,UAA+B;IAC1D,OAAQA;QACN,KAAKC;YACH;QACF,KAAK;YACH;IACJ;IAEA,OAAOA;AACT;AAUO,MAAMN,WAAW;QAAC,EACvBO,aAAa,EACbC,mBAAmB,MAAM,EACzBC,QAAQ,EACRC,YAAYC,yBAAkB,EAC9BC,aAAaD,yBAAkB,EAC/BE,aAAa,EACbC,eAAe,EAED,WADXC;QAPHR;QACAC;QACAC;QACAC;QACAE;QACAC;QACAC;;IAGA,MAAME,cAAcC,IAAAA,yBAAc,EAACF;IAEnC,MAAM,EAAEG,QAAQ,MAAM,EAAEb,UAAU,EAAE,GAAGc,IAAAA,4BAAa;IAEpD,MAAMC,aAAaC,IAAAA,0BAAkB,EAACT,YAAYP;IAClD,MAAoCiB,aAAAA,IAAAA,iBAAS,EAACF,YAAYf,aAApD,EAAEkB,MAAM,EAAmB,GAAGD,YAAjBE,4CAAiBF;QAA5BC;;IAER,MAAME,WAAWC,IAAAA,sBAAU,EAACF,cAAc;QACxCX;QACAC;IACF;IAEA,MAAMa,YAAYZ,UAAUa,SAAS,KAAK,WAAW;QAAEC,MAAM;IAAS,IAAI,CAAC;IAE3E,qBACE,qBAACC,oBAAS;QACRvB,eAAewB,IAAAA,gBAAU,EACvBxB,+BAEAW,UAAUc,oBAAQ,CAACC,OAAO,IAAIhC,eAAe,CAACiB,MAAM,EACpDV,qBAAqB,kDACrBJ,oBAAoBC;QAEtB6B,gBAAgBC,IAAAA,iBAAU,EAACzB;QAC3B0B,iBAAiBC,IAAAA,kBAAW,EAACzB;OACzBe,WACAF,UACAV,YAEHN,UACAO,eAAgBN,CAAAA,cAAc,gBAAgBE,eAAe,YAAW,mBACvE,qBAAC0B,cAAM;QAAClB,YAAYA;QAAYG,QAAQA;;AAIhD"}