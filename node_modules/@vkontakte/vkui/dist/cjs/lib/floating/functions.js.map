{"version":3,"sources":["../../../../src/lib/floating/functions.ts"],"sourcesContent":["import * as React from 'react';\nimport type {\n  AutoPlacementType,\n  FloatingPositionStrategy,\n  Placement,\n  PlacementWithAuto,\n  UseFloatingData,\n} from './types/common';\n\nexport function checkIsNotAutoPlacement(placement: PlacementWithAuto): placement is Placement {\n  return !placement.startsWith('auto');\n}\n\nexport function getAutoPlacementAlign(placement: AutoPlacementType): 'start' | 'end' | null {\n  const align = placement.replace(/auto-|auto/, '');\n  return align === 'start' || align === 'end' ? align : null;\n}\n\n/**\n * Note: не используем `translate3d`, чтобы в лишний раз не выносить в отдельный слой и не занимать память в GPU.\n *\n * см. https://floating-ui.com/docs/react#positioning\n */\nexport function convertFloatingDataToReactCSSProperties(\n  strategy: FloatingPositionStrategy,\n  x: UseFloatingData['x'],\n  y: UseFloatingData['y'],\n  initialWidth: React.CSSProperties['width'] | null = 'max-content',\n  middlewareData?: UseFloatingData['middlewareData'],\n): React.CSSProperties {\n  const styles: React.CSSProperties = {\n    position: strategy,\n    top: y,\n    right: 'auto',\n    bottom: 'auto',\n    left: x,\n  };\n  if (initialWidth !== null) {\n    styles.width = initialWidth;\n  }\n  if (middlewareData) {\n    const hide = middlewareData.hide;\n    if (hide && hide.referenceHidden) {\n      styles['visibility'] = 'hidden';\n    }\n  }\n  return styles;\n}\n\nexport const getArrowCoordsByMiddlewareData = (\n  middlewareData: UseFloatingData['middlewareData'],\n) => {\n  const coords = { x: 0, y: 0 };\n  if (middlewareData.arrow) {\n    const { x = 0, y = 0 } = middlewareData.arrow;\n    coords.x = x;\n    coords.y = y;\n  }\n  return coords;\n};\n"],"names":["checkIsNotAutoPlacement","convertFloatingDataToReactCSSProperties","getArrowCoordsByMiddlewareData","getAutoPlacementAlign","placement","startsWith","align","replace","strategy","x","y","initialWidth","middlewareData","styles","position","top","right","bottom","left","width","hide","referenceHidden","coords","arrow"],"mappings":";;;;;;;;;;;IASgBA,uBAAuB;eAAvBA;;IAcAC,uCAAuC;eAAvCA;;IA0BHC,8BAA8B;eAA9BA;;IApCGC,qBAAqB;eAArBA;;;;iEAbO;AAShB,SAASH,wBAAwBI,SAA4B;IAClE,OAAO,CAACA,UAAUC,UAAU,CAAC;AAC/B;AAEO,SAASF,sBAAsBC,SAA4B;IAChE,MAAME,QAAQF,UAAUG,OAAO,CAAC,cAAc;IAC9C,OAAOD,UAAU,WAAWA,UAAU,QAAQA,QAAQ;AACxD;AAOO,SAASL,wCACdO,QAAkC,EAClCC,CAAuB,EACvBC,CAAuB,EACvBC,eAAoD,aAAa,EACjEC,cAAkD;IAElD,MAAMC,SAA8B;QAClCC,UAAUN;QACVO,KAAKL;QACLM,OAAO;QACPC,QAAQ;QACRC,MAAMT;IACR;IACA,IAAIE,iBAAiB,MAAM;QACzBE,OAAOM,KAAK,GAAGR;IACjB;IACA,IAAIC,gBAAgB;QAClB,MAAMQ,OAAOR,eAAeQ,IAAI;QAChC,IAAIA,QAAQA,KAAKC,eAAe,EAAE;YAChCR,MAAM,CAAC,aAAa,GAAG;QACzB;IACF;IACA,OAAOA;AACT;AAEO,MAAMX,iCAAiC,CAC5CU;IAEA,MAAMU,SAAS;QAAEb,GAAG;QAAGC,GAAG;IAAE;IAC5B,IAAIE,eAAeW,KAAK,EAAE;QACxB,MAAM,EAAEd,IAAI,CAAC,EAAEC,IAAI,CAAC,EAAE,GAAGE,eAAeW,KAAK;QAC7CD,OAAOb,CAAC,GAAGA;QACXa,OAAOZ,CAAC,GAAGA;IACb;IACA,OAAOY;AACT"}