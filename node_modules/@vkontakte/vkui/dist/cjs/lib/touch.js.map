{"version":3,"sources":["../../../src/lib/touch.ts"],"sourcesContent":["import { canUseDOM } from './dom';\n\nexport interface VKUITouchEvent extends MouseEvent, TouchEvent {}\nexport type VKUITouchEventHandler = (e: VKUITouchEvent) => void;\n\n/*\n * Получает координату по оси абсцисс из touch- или mouse-события\n */\nconst coordX = (e: VKUITouchEvent): number => {\n  if (e.clientX != null) {\n    return e.clientX;\n  }\n  return e.changedTouches && e.changedTouches[0].clientX;\n};\n\n/*\n * Получает координату по оси ординат из touch- или mouse-события\n */\nconst coordY = (e: VKUITouchEvent): number => {\n  if (e.clientY != null) {\n    return e.clientY;\n  }\n  return e.changedTouches && e.changedTouches[0].clientY;\n};\n\n// eslint-disable-next-line no-restricted-globals\nconst touchEnabled = () => canUseDOM && 'ontouchstart' in window;\n\n/*\n * Возвращает массив поддерживаемых событий\n * Если браузер поддерживает pointer events или подключена handjs, вернет события указателя.\n * Если нет, используем события мыши\n */\nfunction getSupportedEvents(): string[] {\n  if (touchEnabled()) {\n    return ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n  }\n\n  return ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n}\n\n/*\n * Рассчитывает \"сопротивление\" для iOS тач-событий\n */\nfunction rubber(\n  offset: number,\n  dimension: number,\n  resistanceRate: number,\n  isAndroid: boolean,\n): number {\n  if (isAndroid || offset < 0) {\n    return offset;\n  }\n\n  const offsettedResistance = offset * resistanceRate;\n  return (offsettedResistance * dimension) / (offsettedResistance + dimension);\n}\n\nexport { getSupportedEvents, coordX, coordY, touchEnabled, rubber };\n"],"names":["coordX","coordY","getSupportedEvents","rubber","touchEnabled","e","clientX","changedTouches","clientY","canUseDOM","window","offset","dimension","resistanceRate","isAndroid","offsettedResistance"],"mappings":";;;;;;;;;;;IA0D6BA,MAAM;eAANA;;IAAQC,MAAM;eAANA;;IAA5BC,kBAAkB;eAAlBA;;IAAkDC,MAAM;eAANA;;IAAdC,YAAY;eAAZA;;;qBA1DnB;AAK1B;;CAEC,GACD,MAAMJ,SAAS,CAACK;IACd,IAAIA,EAAEC,OAAO,IAAI,MAAM;QACrB,OAAOD,EAAEC,OAAO;IAClB;IACA,OAAOD,EAAEE,cAAc,IAAIF,EAAEE,cAAc,CAAC,EAAE,CAACD,OAAO;AACxD;AAEA;;CAEC,GACD,MAAML,SAAS,CAACI;IACd,IAAIA,EAAEG,OAAO,IAAI,MAAM;QACrB,OAAOH,EAAEG,OAAO;IAClB;IACA,OAAOH,EAAEE,cAAc,IAAIF,EAAEE,cAAc,CAAC,EAAE,CAACC,OAAO;AACxD;AAEA,iDAAiD;AACjD,MAAMJ,eAAe,IAAMK,cAAS,IAAI,kBAAkBC;AAE1D;;;;CAIC,GACD,SAASR;IACP,IAAIE,gBAAgB;QAClB,OAAO;YAAC;YAAc;YAAa;YAAY;SAAc;IAC/D;IAEA,OAAO;QAAC;QAAa;QAAa;QAAW;KAAa;AAC5D;AAEA;;CAEC,GACD,SAASD,OACPQ,MAAc,EACdC,SAAiB,EACjBC,cAAsB,EACtBC,SAAkB;IAElB,IAAIA,aAAaH,SAAS,GAAG;QAC3B,OAAOA;IACT;IAEA,MAAMI,sBAAsBJ,SAASE;IACrC,OAAO,AAACE,sBAAsBH,YAAcG,CAAAA,sBAAsBH,SAAQ;AAC5E"}