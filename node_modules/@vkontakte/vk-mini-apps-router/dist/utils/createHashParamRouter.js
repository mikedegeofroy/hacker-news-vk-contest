import { createKey } from './utils';
import { createRouter } from '@remix-run/router';
import { InitialLocation } from '../services/InitialLocation';
import { createHashParamHistory } from './react-router-override/HashParamHistory';
export function createHashParamRouter(routes) {
    // Задать новый key для новой локации в случае, если приложение уже запущено,
    // а пользователь делает переход изменив hash в адресной строке браузера.
    window.addEventListener('popstate', (event) => {
        if (!event.state) {
            window.history.replaceState({ key: createKey() }, '');
        }
    });
    const history = createHashParamHistory();
    InitialLocation.init(history.location);
    return createRouter({
        history,
        routes: routes.map((item) => ({ ...item, index: true })),
    }).initialize();
}
//# sourceMappingURL=createHashParamRouter.js.map