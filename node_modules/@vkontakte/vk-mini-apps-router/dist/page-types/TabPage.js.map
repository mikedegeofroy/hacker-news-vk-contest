{"version":3,"file":"TabPage.js","sourceRoot":"","sources":["../../src/page-types/TabPage.ts"],"names":[],"mappings":"AAAA,OAAO,EAA2D,SAAS,EAAE,MAAM,UAAU,CAAC;AAS9F,MAAe,WAAW;IACxB,YAA6B,EAAK,EAAS,IAAY,EAAY,MAAsB;QAA5D,OAAE,GAAF,EAAE,CAAG;QAAS,SAAI,GAAJ,IAAI,CAAQ;QAAY,WAAM,GAAN,MAAM,CAAgB;QACvF,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YACvB,6DAA6D;YAC7D,mBAAmB;YACnB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,MAAM;aACf,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;aACjC,IAAI,EAAE;aACN,GAAG,CAAC,CAAC,KAAK,EAAmB,EAAE,CAAC,CAAC,EAAE,GAAG,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;aAC7D,MAAM,CAAC;YACN,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,GAAG,EAAE,IAAI,CAAC,EAAE;SACb,CAAC,CAAC;IACP,CAAC;CACF;AAED,MAAM,OAAO,OAA0B,SAAQ,WAAc;IAE3D,YAAY,EAAK,EAAS,IAAY,EAAE,SAAyB,EAAE;QACjE,KAAK,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;QADA,SAAI,GAAJ,IAAI,CAAQ;QADtC,cAAS,GAAU,KAAK,CAAC;IAGzB,CAAC;CACF;AAED,MAAM,OAAO,iBAAsD,SAAQ,WAAc;IAEvF,YAAmB,EAAK,EAAS,IAAY,EAAS,SAAuB,EAAE,SAAyB,EAAE;QACxG,KAAK,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;QADP,OAAE,GAAF,EAAE,CAAG;QAAS,SAAI,GAAJ,IAAI,CAAQ;QAAS,cAAS,GAAT,SAAS,CAAc;QAD7E,cAAS,GAAS,IAAI,CAAC;IAGvB,CAAC;CACF;AA0DD,MAAM,UAAU,SAAS,CAAqC,EAAK,EAAE,IAAY,EAAE,MAAuB,EAAE,SAAwB;IAElI,IAAI,SAAS,EAAE;QACb,OAAO,IAAI,iBAAiB,CAAC,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,IAAI,EAAE,CAAC,CAAC;KACjE;IACD,OAAO,IAAI,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,IAAI,EAAE,CAAC,CAAC;AAC7C,CAAC","sourcesContent":["import { AddChild, HasId, Page, PageWithParams, RepresentsRoutes, uniqueKey } from './common';\nimport { AnyModalPage } from './ModalPage';\nimport { CommonRouteObject } from '../type';\n\ninterface TabRoutePartial extends CommonRouteObject {\n  tab: string;\n  modal?: string;\n}\n\nabstract class BaseTabPage<I extends string> implements RepresentsRoutes<TabRoutePartial>, HasId<I> {\n  protected constructor(public id: I, public path: string, protected modals: AnyModalPage[]) {\n    modals.forEach((modal) => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      this[uniqueKey(this, modal.id)] = modal;\n    });\n  }\n\n  getRoutes(): TabRoutePartial[] {\n    return this.modals\n      .map((modal) => modal.getRoutes())\n      .flat()\n      .map((route): TabRoutePartial => ({ ...route, tab: this.id }))\n      .concat({\n        path: this.path,\n        tab: this.id,\n      });\n  }\n}\n\nexport class TabPage<I extends string> extends BaseTabPage<I> implements Page, HasId<I> {\n  hasParams: false = false;\n  constructor(id: I, public path: string, modals: AnyModalPage[] = []) {\n    super(id, path, modals);\n  }\n}\n\nexport class TabPageWithParams<I extends string, T extends string> extends BaseTabPage<I> implements PageWithParams<T>, HasId<I> {\n  hasParams: true = true;\n  constructor(public id: I, public path: string, public paramKeys: readonly T[], modals: AnyModalPage[] = []) {\n    super(id, path, modals);\n  }\n}\n\nexport type AnyTabPage = TabPage<any> | TabPageWithParams<any, any>;\n\nexport function createTab<\n  T extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage, F extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E, F]):\nAddChild<AddChild<AddChild<AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>, D>, E>, F>;\nexport function createTab<\n  T extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E]):\nAddChild<AddChild<AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>, D>, E>;\nexport function createTab<\n  T extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D]):\nAddChild<AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>, D>;\nexport function createTab<\n  T extends string, A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C]): AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>;\nexport function createTab<\n  T extends string, A extends AnyModalPage, B extends AnyModalPage,\n>(id: T, path: string, modals: [A, B]): AddChild<AddChild<TabPage<T>, A>, B>;\nexport function createTab<T extends string, A extends AnyModalPage>(id: T, path: string, modals: [A]): AddChild<TabPage<T>, A>;\nexport function createTab<T extends string>(id: T, path: string, modals?: AnyModalPage[]): TabPage<T>;\n\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage, F extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E, F], paramKeys: readonly P[]):\nAddChild<AddChild<AddChild<AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>, D>, E>, F>;\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E], paramKeys: readonly P[]):\nAddChild<AddChild<AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>, D>, E>;\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D], paramKeys: readonly P[]):\nAddChild<AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>, D>;\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C], paramKeys: readonly P[]): AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>;\nexport function createTab<\n  T extends string, P extends string, A extends AnyModalPage, B extends AnyModalPage,\n>(id: T, path: string, modals: [A, B], paramKeys: readonly P[]): AddChild<AddChild<TabPageWithParams<T, P>, A>, B>;\nexport function createTab<\n  T extends string, P extends string, A extends AnyModalPage,\n>(id: T, path: string, modals: [A], paramKeys: readonly P[]): AddChild<TabPageWithParams<T, P>, A>;\nexport function createTab<T extends string, P extends string>(id: T, path: string, modals: AnyModalPage[], paramKeys: readonly P[]): TabPageWithParams<T, P>;\nexport function createTab<T extends string, P extends string>(id: T, path: string, modals?: AnyModalPage[], paramKeys?: readonly P[]):\nTabPage<T> | TabPageWithParams<T, P> {\n  if (paramKeys) {\n    return new TabPageWithParams(id, path, paramKeys, modals ?? []);\n  }\n  return new TabPage(id, path, modals ?? []);\n}\n"]}