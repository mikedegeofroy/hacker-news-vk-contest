{
  "version": 3,
  "sources": ["../../@vkontakte/vk-bridge-react/src/lib/react/useIsomorphicLayoutEffect.ts", "../../@vkontakte/vk-bridge-react/src/hooks/useAdaptivity.ts", "../../@vkontakte/vk-bridge-react/src/hooks/useApperance.ts", "../../@vkontakte/vk-bridge-react/src/hooks/useInsets.ts", "../../@vkontakte/vk-bridge-react/src/functions/runTapticImpactOccurred.ts"],
  "sourcesContent": ["import { useLayoutEffect, useEffect } from 'react';\n\nexport const useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n", "import { useState } from 'react';\nimport vkBridge from '@vkontakte/vk-bridge';\nimport type {\n  VKBridgeEvent,\n  AnyReceiveMethodName,\n  AdaptivityType,\n  SharedUpdateConfigData,\n  ParentConfigData,\n} from '@vkontakte/vk-bridge';\nimport { useIsomorphicLayoutEffect } from '../lib/react';\n\nexport interface UseAdaptivity {\n  type: null | AdaptivityType;\n  viewportWidth: number;\n  viewportHeight: number;\n}\n\nconst initialState: UseAdaptivity = {\n  type: null,\n  viewportWidth: 0,\n  viewportHeight: 0,\n};\n\nexport const useAdaptivity = (): UseAdaptivity => {\n  const [bridgeAdaptivity, setBridgeAdaptivity] = useState<UseAdaptivity>(initialState);\n\n  useIsomorphicLayoutEffect(() => {\n    const updateAdaptivity = (data: ParentConfigData) => {\n      if (!('viewport_width' in data) || !('viewport_height' in data)) {\n        return;\n      }\n\n      const newAdaptivity = resolveAdaptivity(data);\n\n      if (newAdaptivity) {\n        setBridgeAdaptivity(newAdaptivity);\n      }\n    };\n\n    const handleBridgeEvent = (event: VKBridgeEvent<AnyReceiveMethodName>) => {\n      const { type, data } = event.detail;\n\n      if (type !== 'VKWebAppUpdateConfig') {\n        return;\n      }\n\n      updateAdaptivity(data);\n    };\n\n    vkBridge.subscribe(handleBridgeEvent);\n    vkBridge.send('VKWebAppGetConfig').then(updateAdaptivity).catch(console.error);\n\n    return () => {\n      vkBridge.unsubscribe(handleBridgeEvent);\n    };\n  }, []);\n\n  return bridgeAdaptivity;\n};\n\nfunction resolveAdaptivity(data: SharedUpdateConfigData): UseAdaptivity | null {\n  const { adaptivity, viewport_width, viewport_height } = data;\n\n  const bridgeAdaptivity: UseAdaptivity = {\n    type: null,\n    viewportWidth: isFinite(viewport_width) ? Number(viewport_width) : 0,\n    viewportHeight: isFinite(viewport_height) ? Number(viewport_height) : 0,\n  };\n\n  switch (adaptivity) {\n    case 'force_mobile':\n    case 'force_mobile_compact':\n    case 'adaptive':\n      bridgeAdaptivity.type = adaptivity;\n  }\n\n  return bridgeAdaptivity;\n}\n", "import { useState } from 'react';\nimport vkBridge from '@vkontakte/vk-bridge';\nimport type {\n  AnyReceiveMethodName,\n  VKBridgeEvent,\n  AppearanceType,\n  ParentConfigData,\n} from '@vkontakte/vk-bridge';\nimport { useIsomorphicLayoutEffect } from '../lib/react';\n\nexport type UseAppearance = AppearanceType | null;\n\n/**\n * Note: it works only for \"embedded\" app mode.\n */\nexport const useAppearance = (): UseAppearance => {\n  const [appearance, setAppearance] = useState<UseAppearance>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!vkBridge.isEmbedded()) {\n      return;\n    }\n\n    const updateAppearance = (data: ParentConfigData) => {\n      const initialAppearance = resolveAppearance(data);\n\n      if (initialAppearance) {\n        setAppearance(initialAppearance);\n      }\n    };\n\n    const handleBridgeEvent = (event: VKBridgeEvent<AnyReceiveMethodName>) => {\n      const { type, data } = event.detail;\n\n      if (type !== 'VKWebAppUpdateConfig' || !('appearance' in data) || !('scheme' in data)) {\n        return;\n      }\n\n      updateAppearance(data);\n    };\n\n    vkBridge.subscribe(handleBridgeEvent);\n    vkBridge.send('VKWebAppGetConfig').then(updateAppearance).catch(console.error);\n\n    return () => vkBridge.unsubscribe(handleBridgeEvent);\n  }, []);\n\n  return appearance;\n};\n\nfunction resolveAppearance({ scheme, appearance }: ParentConfigData): UseAppearance {\n  if (appearance) {\n    return appearance;\n  }\n\n  return scheme === 'space_gray' || scheme === 'vkcom_dark' ? 'dark' : 'light';\n}\n", "import { useState } from 'react';\nimport vkBridge from '@vkontakte/vk-bridge';\nimport type { VKBridgeEvent, AnyReceiveMethodName, Insets } from '@vkontakte/vk-bridge';\nimport { useIsomorphicLayoutEffect } from '../lib/react';\n\nconst VIRTUAL_KEYBOARD_HEIGHT = 150;\n\nconst BOTTOM_INSET_FOR_VIRTUAL_KEYBOARD = 0;\n\nexport type UseInsets = {\n  top: Insets['top'];\n  right: Insets['right'];\n  bottom: Insets['bottom'];\n  left: Insets['left'];\n} | null;\n\nexport const useInsets = (): UseInsets => {\n  const [insets, setInsets] = useState<UseInsets>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    const handleBridgeEvent = (event: VKBridgeEvent<AnyReceiveMethodName>) => {\n      const insets = resolveInsets(event);\n      if (insets) {\n        setInsets(insets);\n      }\n    };\n\n    vkBridge.subscribe(handleBridgeEvent);\n    return () => {\n      vkBridge.unsubscribe(handleBridgeEvent);\n    };\n  }, []);\n\n  return insets;\n};\n\nfunction resolveInsets(event: VKBridgeEvent<AnyReceiveMethodName>): UseInsets | null {\n  const { type, data } = event.detail;\n  switch (type) {\n    case 'VKWebAppUpdateInsets': // TODO [>=3]: it is legacy, remove it\n    case 'VKWebAppUpdateConfig':\n      if (!('insets' in data)) {\n        return null;\n      }\n      const { insets } = data;\n      if (insets) {\n        return {\n          ...insets,\n          bottom:\n            insets.bottom > VIRTUAL_KEYBOARD_HEIGHT\n              ? BOTTOM_INSET_FOR_VIRTUAL_KEYBOARD\n              : insets.bottom,\n        };\n      }\n  }\n  return null;\n}\n", "import vkBridge from '@vkontakte/vk-bridge';\nimport type { TapticVibrationPowerType } from '@vkontakte/vk-bridge';\n\n/**\n * Dispatch device vibration if supported.\n *\n * Return `false` if not supported.\n */\nexport function runTapticImpactOccurred(style: TapticVibrationPowerType) {\n  if (vkBridge.supports('VKWebAppTapticImpactOccurred')) {\n    vkBridge.send('VKWebAppTapticImpactOccurred', { style }).catch(() => undefined);\n    return true;\n  }\n  return false;\n}\n"],
  "mappings": "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",
  "names": ["_a", "insets"]
}
